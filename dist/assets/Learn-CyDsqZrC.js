import{c as D,u as B,r as l,j as e,m as d,B as y,X as U,h as Y,e as re,L as E,f as ne,P as ie}from"./index-H5eLpdEA.js";import{a as le,u as oe}from"./useGamification-BtiiQjBl.js";import{u as ce}from"./useWeeklyChallenge-DfgJS0UP.js";import{u as J,V as F,X as de}from"./XpPopup-DvTFvK-G.js";import{A as K}from"./arrow-right-TpZFte_F.js";import{A as ee}from"./progress-D-FsW8vX.js";import{E as me}from"./eye-Cv1c1HLw.js";import{X as H}from"./XpBar-BK9iqufC.js";import"./zap-Dyk872CS.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=D("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=D("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=D("PartyPopper",[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=D("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]),pe={uz:"O'zbekcha",ru:"Ð ÑƒÑÑÐºÐ¸Ð¹",en:"English"},I={uz:"ðŸ‡ºðŸ‡¿",ru:"ðŸ‡·ðŸ‡º",en:"ðŸ‡¬ðŸ‡§"},ge=({word:t,onAnswer:r,isReversed:i=!1})=>{const{t:a}=B(),[S,w]=l.useState(!1),[c,k]=l.useState(null),{speak:A,isSpeaking:m,isSupported:j,stop:g}=J(),v=i?t.translatedWord:t.originalWord,b=i?t.originalWord:t.translatedWord,x=i?t.targetLanguage:t.sourceLanguage,N=i?t.sourceLanguage:t.targetLanguage,_=()=>{S||w(!0)},W=f=>{k(f),setTimeout(()=>{r(f),w(!1),k(null)},500)},C=(f,L)=>{m?g():A(f,{lang:L})};return e.jsxs(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"w-full max-w-md mx-auto",children:[e.jsxs("div",{className:`relative min-h-[320px] rounded-3xl shadow-elevated p-6 transition-all duration-300 ${c===!0?"bg-primary/10 ring-2 ring-primary":c===!1?"bg-destructive/10 ring-2 ring-destructive":"bg-card"}`,children:[e.jsxs("div",{className:"absolute top-4 right-4 px-3 py-1 rounded-full text-sm font-medium",style:{backgroundColor:`hsl(var(--box-${t.boxNumber}) / 0.15)`,color:`hsl(var(--box-${t.boxNumber}))`},children:[a("box")," ",t.boxNumber]}),e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx("span",{className:"text-2xl",children:I[x]}),e.jsx(K,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-2xl",children:I[N]})]}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:pe[x]}),e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("h2",{className:"font-display font-bold text-3xl text-foreground",children:v}),j&&e.jsx(y,{variant:"ghost",size:"icon",onClick:()=>C(v,x),className:`rounded-full transition-all ${m?"text-primary animate-pulse":"text-muted-foreground hover:text-primary"}`,children:m?e.jsx(O,{className:"w-5 h-5"}):e.jsx(F,{className:"w-5 h-5"})})]})]}),e.jsx(ee,{mode:"wait",children:S?e.jsxs(d.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0},children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:a("translation")}),e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("p",{className:"font-display font-semibold text-2xl text-primary",children:b}),j&&e.jsx(y,{variant:"ghost",size:"icon",onClick:()=>C(b,N),className:`rounded-full transition-all ${m?"text-primary animate-pulse":"text-muted-foreground hover:text-primary"}`,children:m?e.jsx(O,{className:"w-5 h-5"}):e.jsx(F,{className:"w-5 h-5"})})]})]}),t.exampleSentences.length>0&&e.jsxs("div",{className:"mb-6 p-4 bg-muted/50 rounded-xl",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:a("examples")}),t.exampleSentences.map((f,L)=>e.jsxs("p",{className:"text-sm text-foreground italic",children:["â€¢ ",f]},L))]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(y,{onClick:()=>W(!1),variant:"outline",size:"lg",className:"flex-1 gap-2 border-destructive text-destructive hover:bg-destructive hover:text-destructive-foreground",children:[e.jsx(U,{className:"w-5 h-5"}),a("incorrect")]}),e.jsxs(y,{onClick:()=>W(!0),size:"lg",className:"flex-1 gap-2 bg-primary hover:bg-primary/90",children:[e.jsx(Y,{className:"w-5 h-5"}),a("correct")]})]})]},"revealed"):e.jsx(d.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-center",children:e.jsxs(y,{onClick:_,size:"lg",className:"gap-2 gradient-primary text-primary-foreground",children:[e.jsx(me,{className:"w-5 h-5"}),a("showAnswer")]})},"hidden")})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:[t.timesReviewed," ",a("reviewsToday").toLowerCase()]})})]})},fe={uz:"O'zbekcha",ru:"Ð ÑƒÑÑÐºÐ¸Ð¹",en:"English"},Q={uz:"ðŸ‡ºðŸ‡¿",ru:"ðŸ‡·ðŸ‡º",en:"ðŸ‡¬ðŸ‡§"},Z=t=>{const r=[...t];for(let i=r.length-1;i>0;i--){const a=Math.floor(Math.random()*(i+1));[r[i],r[a]]=[r[a],r[i]]}return r},ye=({word:t,allWords:r,onAnswer:i,isReversed:a=!1})=>{const{t:S}=B(),{speak:w,isSpeaking:c,isSupported:k,stop:A}=J(),[m,j]=l.useState(null),[g,v]=l.useState(!1),b=a?t.translatedWord:t.originalWord,x=a?t.originalWord:t.translatedWord,N=a?t.targetLanguage:t.sourceLanguage,_=a?t.sourceLanguage:t.targetLanguage,W=l.useMemo(()=>{const n=r.filter(p=>p.id!==t.id).map(p=>a?p.originalWord:p.translatedWord).filter((p,q,P)=>P.indexOf(p)===q),M=[...Z(n).slice(0,3),x];return Z(M)},[t.id,r,a,x]),C=n=>{if(g)return;j(n),v(!0);const h=n===x;setTimeout(()=>{i(h),j(null),v(!1)},1200)},f=(n,h)=>{c?A():w(n,{lang:h})},L=n=>g?n===x?"bg-primary/20 border-2 border-primary text-primary":n===m&&n!==x?"bg-destructive/20 border-2 border-destructive text-destructive":"bg-card border-2 border-border opacity-50":"bg-card hover:bg-muted border-2 border-border hover:border-primary";return e.jsxs(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"w-full max-w-md mx-auto",children:[e.jsxs("div",{className:"relative min-h-[400px] rounded-3xl shadow-elevated p-6 bg-card",children:[e.jsxs("div",{className:"absolute top-4 right-4 px-3 py-1 rounded-full text-sm font-medium",style:{backgroundColor:`hsl(var(--box-${t.boxNumber}) / 0.15)`,color:`hsl(var(--box-${t.boxNumber}))`},children:[S("box")," ",t.boxNumber]}),e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx("span",{className:"text-2xl",children:Q[N]}),e.jsx(K,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-2xl",children:Q[_]})]}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:fe[N]}),e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("h2",{className:"font-display font-bold text-3xl text-foreground",children:b}),k&&e.jsx(y,{variant:"ghost",size:"icon",onClick:()=>f(b,N),className:`rounded-full transition-all ${c?"text-primary animate-pulse":"text-muted-foreground hover:text-primary"}`,children:c?e.jsx(O,{className:"w-5 h-5"}):e.jsx(F,{className:"w-5 h-5"})})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-4",children:"To'g'ri tarjimani tanlang:"})]}),e.jsx("div",{className:"grid grid-cols-1 gap-3",children:W.map((n,h)=>e.jsxs(d.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:h*.1},onClick:()=>C(n),disabled:g,className:`p-4 rounded-xl font-medium text-left transition-all duration-200 flex items-center justify-between ${L(n)}`,children:[e.jsx("span",{children:n}),g&&n===x&&e.jsx(Y,{className:"w-5 h-5 text-primary"}),g&&n===m&&n!==x&&e.jsx(U,{className:"w-5 h-5 text-destructive"})]},`${n}-${h}`))}),g&&e.jsx(d.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mt-4 text-center",children:m===x?e.jsx("p",{className:"text-primary font-semibold",children:"âœ“ To'g'ri!"}):e.jsx("p",{className:"text-destructive font-semibold",children:"âœ— Noto'g'ri"})})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:[t.timesReviewed," marta takrorlangan"]})})]})},je=t=>{const r=[...t];for(let i=r.length-1;i>0;i--){const a=Math.floor(Math.random()*(i+1));[r[i],r[a]]=[r[a],r[i]]}return r},Ae=()=>{const{t}=B(),{activeLanguage:r}=re(),{getWordsForReview:i,reviewWord:a,isLoading:S,stats:w,words:c}=le(),{addXp:k,checkAndUnlockAchievements:A,XP_PER_CORRECT:m,XP_PER_INCORRECT:j,level:g}=oe(),{userParticipation:v,updateParticipantStats:b}=ce(),[x,N]=l.useState(0),[_,W]=l.useState(new Set),[C,f]=l.useState(!1),[L,n]=l.useState(0),[h,M]=l.useState(null),p=l.useRef(null),q=l.useMemo(()=>{const s=new Date;return c.filter(z=>new Date(z.next_review_time)<=s)},[c]),P=l.useMemo(()=>je(q).map(z=>({word:z,isReversed:Math.random()<.5})),[q]),G=l.useMemo(()=>P.filter(s=>!_.has(s.word.id)),[P,_]),te=l.useMemo(()=>c.map(s=>({id:s.id,originalWord:s.original_word,translatedWord:s.translated_word,sourceLanguage:s.source_language,targetLanguage:s.target_language,exampleSentences:s.example_sentences||[],boxNumber:s.box_number,nextReviewTime:new Date(s.next_review_time),timesReviewed:s.times_reviewed,timesCorrect:s.times_correct,timesIncorrect:s.times_incorrect,createdAt:new Date(s.created_at),lastReviewed:s.last_reviewed?new Date(s.last_reviewed):null})),[c]),u=G[0],X=P.length,$=_.size,V=l.useCallback(async s=>{if(u){await a(u.word.id,s),W(T=>new Set([...T,u.word.id])),N(T=>T+1);const z=s?m:j;n(z),f(!0),await k(z,s?"correct_answer":"incorrect_answer"),v&&await b(z,1,s?1:0),p.current&&clearTimeout(p.current),p.current=setTimeout(()=>f(!1),1500);const se=c.reduce((T,ae)=>T+ae.times_reviewed,0)+1;await A({totalWords:c.length,streak:w.streak,totalReviews:se,level:g})}},[u,a,m,j,k,c,A,w.streak,g,v,b]);if(l.useEffect(()=>()=>{p.current&&clearTimeout(p.current)},[]),S)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-pulse-soft text-muted-foreground",children:t("loading")})});if(!r)return e.jsx("div",{className:"min-h-screen pb-24 md:pt-24 md:pb-8",children:e.jsxs("div",{className:"container mx-auto px-4 py-6 flex flex-col items-center justify-center min-h-[60vh]",children:[e.jsx("p",{className:"text-muted-foreground",children:"Avval tilni tanlang"}),e.jsx(E,{to:"/",children:e.jsx(y,{className:"mt-4",children:"Bosh sahifaga"})})]})});if(X===0)return e.jsx("div",{className:"min-h-screen pb-24 md:pt-24 md:pb-8",children:e.jsx("div",{className:"container mx-auto px-4 py-6 flex flex-col items-center justify-center min-h-[60vh]",children:e.jsxs(d.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center",children:[e.jsx("div",{className:"w-24 h-24 mx-auto mb-6 rounded-3xl bg-muted flex items-center justify-center",children:e.jsx(ne,{className:"w-12 h-12 text-muted-foreground"})}),e.jsx("h2",{className:"font-display font-bold text-2xl mb-2",children:t("noWordsToReview")}),e.jsx("p",{className:"text-muted-foreground mb-8 max-w-sm",children:"Hozircha takrorlash uchun so'z yo'q. Yangi so'zlar qo'shing yoki keyinroq qaytib keling!"}),e.jsx(E,{to:"/add",children:e.jsxs(y,{size:"lg",className:"gap-2 gradient-primary text-primary-foreground",children:[e.jsx(ie,{className:"w-5 h-5"}),t("addWord")]})})]})})});if(G.length===0&&$>0)return e.jsx("div",{className:"min-h-screen pb-24 md:pt-24 md:pb-8",children:e.jsx("div",{className:"container mx-auto px-4 py-6 flex flex-col items-center justify-center min-h-[60vh]",children:e.jsxs(d.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center",children:[e.jsx(d.div,{initial:{rotate:0},animate:{rotate:[0,-10,10,-10,0]},transition:{delay:.3,duration:.5},className:"w-24 h-24 mx-auto mb-6 rounded-3xl gradient-primary flex items-center justify-center",children:e.jsx(he,{className:"w-12 h-12 text-primary-foreground"})}),e.jsx("h2",{className:"font-display font-bold text-2xl mb-2",children:t("congratulations")}),e.jsx("p",{className:"text-muted-foreground mb-2",children:t("allDone")}),e.jsxs("p",{className:"text-lg font-medium text-primary mb-4",children:[$," so'z takrorlandi!"]}),e.jsx("div",{className:"mb-8",children:e.jsx(H,{})}),e.jsx(E,{to:"/",children:e.jsx(y,{size:"lg",variant:"outline",className:"gap-2",children:t("back")})})]})})});if(!h)return e.jsx("div",{className:"min-h-screen pb-24 md:pt-24 md:pb-8",children:e.jsxs("div",{className:"container mx-auto px-4 py-6",children:[e.jsxs(d.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-8",children:[e.jsx("h1",{className:"font-display font-bold text-2xl text-foreground mb-2",children:"O'rganish rejimini tanlang"}),e.jsxs("p",{className:"text-muted-foreground",children:[X," ta so'z takrorlash uchun tayyor"]})]}),e.jsxs("div",{className:"grid gap-4 max-w-md mx-auto",children:[e.jsx(d.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1},onClick:()=>M("flashcard"),className:"p-6 rounded-3xl bg-card shadow-elevated hover:shadow-lg transition-all border-2 border-transparent hover:border-primary text-left group",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 rounded-2xl bg-primary/10 text-primary group-hover:bg-primary group-hover:text-primary-foreground transition-colors",children:e.jsx(ue,{className:"w-8 h-8"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg mb-1",children:"Flashcard"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"So'zni ko'ring, javobni eslang va o'zingizni tekshiring"})]})]})}),e.jsx(d.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2},onClick:()=>M("quiz"),className:"p-6 rounded-3xl bg-card shadow-elevated hover:shadow-lg transition-all border-2 border-transparent hover:border-primary text-left group",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 rounded-2xl bg-accent/50 text-accent-foreground group-hover:bg-primary group-hover:text-primary-foreground transition-colors",children:e.jsx(xe,{className:"w-8 h-8"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg mb-1",children:"Quiz (4 variant)"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"4 ta variantdan to'g'ri javobni tanlang - o'yin rejimi"})]})]})})]})]})});const o=u==null?void 0:u.word,R=o?{id:o.id,originalWord:o.original_word,translatedWord:o.translated_word,sourceLanguage:o.source_language,targetLanguage:o.target_language,exampleSentences:o.example_sentences||[],boxNumber:o.box_number,nextReviewTime:new Date(o.next_review_time),timesReviewed:o.times_reviewed,timesCorrect:o.times_correct,timesIncorrect:o.times_incorrect,createdAt:new Date(o.created_at),lastReviewed:o.last_reviewed?new Date(o.last_reviewed):null}:null;return e.jsxs("div",{className:"min-h-screen pb-24 md:pt-24 md:pb-8",children:[e.jsx(de,{amount:L,show:C}),e.jsxs("div",{className:"container mx-auto px-4 py-6",children:[e.jsxs(d.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"font-display font-bold text-2xl text-foreground",children:t("learn")}),e.jsx("button",{onClick:()=>M(null),className:"text-xs px-2 py-1 rounded-full bg-muted text-muted-foreground hover:bg-primary/10 hover:text-primary transition-colors",children:h==="flashcard"?"ðŸ“š Flashcard":"ðŸŽ® Quiz"})]}),e.jsx(H,{compact:!0})]}),e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-sm text-muted-foreground",children:[$+1," / ",X," so'z"]}),e.jsxs("span",{className:"text-sm text-primary font-medium",children:["+",m," XP to'g'ri javob uchun"]})]}),e.jsx("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:e.jsx(d.div,{initial:{width:0},animate:{width:`${$/X*100}%`},className:"h-full gradient-primary rounded-full",transition:{duration:.3}})})]}),e.jsxs(ee,{mode:"wait",children:[R&&h==="flashcard"&&e.jsx(ge,{word:R,onAnswer:V,isReversed:u==null?void 0:u.isReversed},R.id),R&&h==="quiz"&&e.jsx(ye,{word:R,allWords:te,onAnswer:V,isReversed:u==null?void 0:u.isReversed},R.id)]})]})]})};export{Ae as default};
