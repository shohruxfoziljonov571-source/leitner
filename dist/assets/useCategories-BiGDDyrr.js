import{c as k,r as s,a as p,s as n,b as i}from"./index-CF1n9Zjo.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=k("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]),w=[{name:"Uy",icon:"ðŸ ",color:"hsl(200, 70%, 50%)"},{name:"Ofis",icon:"ðŸ’¼",color:"hsl(220, 70%, 50%)"},{name:"Sayohat",icon:"âœˆï¸",color:"hsl(280, 70%, 50%)"},{name:"Ovqat",icon:"ðŸ½ï¸",color:"hsl(30, 70%, 50%)"},{name:"Sog'liq",icon:"ðŸ¥",color:"hsl(0, 70%, 50%)"},{name:"Sport",icon:"âš½",color:"hsl(120, 70%, 50%)"},{name:"Moda",icon:"ðŸ‘•",color:"hsl(320, 70%, 50%)"},{name:"Texnologiya",icon:"ðŸ’»",color:"hsl(180, 70%, 50%)"}],b=()=>{const[l,c]=s.useState([]),[h,g]=s.useState(!0),{user:o}=p(),d=s.useCallback(async()=>{if(!o){c([]),g(!1);return}try{const{data:r,error:e}=await n.from("categories").select("*").eq("user_id",o.id).order("created_at",{ascending:!0});if(e)throw e;c(r||[])}catch(r){console.error("Error fetching categories:",r)}finally{g(!1)}},[o]);s.useEffect(()=>{d()},[d]);const f=s.useCallback(async r=>{if(!o)return null;try{const{data:e,error:a}=await n.from("categories").insert({user_id:o.id,name:r.name,icon:r.icon,color:r.color}).select().single();if(a)throw a;return c(t=>[...t,e]),i.success(`"${r.name}" kategoriyasi qo'shildi`),e}catch(e){return console.error("Error adding category:",e),i.error("Kategoriya qo'shishda xatolik"),null}},[o]),y=s.useCallback(async(r,e)=>{if(o)try{const{error:a}=await n.from("categories").update(e).eq("id",r);if(a)throw a;c(t=>t.map(u=>u.id===r?{...u,...e}:u)),i.success("Kategoriya yangilandi")}catch(a){console.error("Error updating category:",a),i.error("Yangilashda xatolik")}},[o]),m=s.useCallback(async r=>{if(o)try{const{error:e}=await n.from("categories").delete().eq("id",r);if(e)throw e;c(a=>a.filter(t=>t.id!==r)),i.success("Kategoriya o'chirildi")}catch(e){console.error("Error deleting category:",e),i.error("O'chirishda xatolik")}},[o]),C=s.useCallback(async()=>{if(!(!o||l.length>0))try{const r=w.map(t=>({user_id:o.id,name:t.name,icon:t.icon,color:t.color})),{data:e,error:a}=await n.from("categories").insert(r).select();if(a)throw a;c(e||[]),i.success("Standart kategoriyalar qo'shildi")}catch(r){console.error("Error initializing categories:",r)}},[o,l.length]);return{categories:l,isLoading:h,addCategory:f,updateCategory:y,deleteCategory:m,initializeDefaultCategories:C,refetch:d}};export{q as F,b as u};
