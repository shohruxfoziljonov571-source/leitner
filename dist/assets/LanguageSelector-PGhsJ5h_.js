import{e as T,u as q,r as u,j as e,m as x,B as p,P as N,h as S,b as t}from"./index-CF1n9Zjo.js";import{C as A}from"./chevron-down-DxP7lQqK.js";import{A as k}from"./index-DxdTuE2l.js";import{T as B}from"./trash-2-Chs7nWw8.js";const r={uz:{uz:"O'zbekcha",ru:"Ð£Ð·Ð±ÐµÐºÑÐºÐ¸Ð¹",en:"Uzbek"},ru:{uz:"Ruscha",ru:"Ð ÑƒÑÑÐºÐ¸Ð¹",en:"Russian"},en:{uz:"Inglizcha",ru:"ÐÐ½Ð³Ð»Ð¸Ð¹ÑÐºÐ¸Ð¹",en:"English"}},l={uz:"ðŸ‡ºðŸ‡¿",ru:"ðŸ‡·ðŸ‡º",en:"ðŸ‡¬ðŸ‡§"},R=({showAddNew:v=!0})=>{const{userLanguages:n,activeLanguage:a,setActiveLanguage:w,addLanguage:z,removeLanguage:C}=T(),{language:i}=q(),[h,g]=u.useState(!1),[f,c]=u.useState(!1),[o,j]=u.useState(""),[d,b]=u.useState(""),_=async()=>{if(!o||!d){t.error("Iltimos, ikkala tilni tanlang");return}if(o===d){t.error("Tillar bir xil bo'lmasligi kerak");return}if(n.find(y=>y.source_language===o&&y.target_language===d)){t.error("Bu til kombinatsiyasi allaqachon mavjud");return}await z(o,d)?(t.success("Til qo'shildi!"),c(!1),j(""),b("")):t.error("Xatolik yuz berdi")},L=async(s,m)=>{if(m.stopPropagation(),n.length===1){t.error("Kamida bitta til bo'lishi kerak");return}confirm("Bu tilni o'chirishni xohlaysizmi?")&&(await C(s),t.success("Til o'chirildi"))};return n.length===0&&!f?e.jsxs(x.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-card rounded-2xl shadow-card p-6 text-center",children:[e.jsx("h3",{className:"font-medium text-lg mb-2",children:"O'rganish tilini tanlang"}),e.jsx("p",{className:"text-muted-foreground text-sm mb-4",children:"Qaysi tilni o'rganmoqchisiz?"}),e.jsxs(p,{onClick:()=>c(!0),className:"gradient-primary text-primary-foreground",children:[e.jsx(N,{className:"w-4 h-4 mr-2"}),"Til qo'shish"]})]}):e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>g(!h),className:"flex items-center gap-2 bg-card rounded-xl px-4 py-2.5 shadow-card hover:shadow-elevated transition-shadow w-full",children:[a&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-lg",children:[l[a.source_language]," â†’ ",l[a.target_language]]}),e.jsxs("span",{className:"text-sm font-medium flex-1 text-left",children:[r[a.source_language][i]," â†’ ",r[a.target_language][i]]})]}),e.jsx(A,{className:`w-4 h-4 transition-transform ${h?"rotate-180":""}`})]}),e.jsx(k,{children:h&&e.jsxs(x.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute top-full left-0 right-0 mt-2 bg-card rounded-xl shadow-elevated z-50 overflow-hidden",children:[n.map(s=>e.jsxs("div",{onClick:()=>{w(s),g(!1)},className:`flex items-center gap-3 p-3 cursor-pointer transition-colors ${(a==null?void 0:a.id)===s.id?"bg-primary/10":"hover:bg-muted"}`,children:[e.jsxs("span",{className:"text-lg",children:[l[s.source_language]," â†’ ",l[s.target_language]]}),e.jsxs("span",{className:"text-sm flex-1",children:[r[s.source_language][i]," â†’ ",r[s.target_language][i]]}),(a==null?void 0:a.id)===s.id&&e.jsx(S,{className:"w-4 h-4 text-primary"}),n.length>1&&e.jsx("button",{onClick:m=>L(s.id,m),className:"p-1 hover:bg-destructive/10 rounded transition-colors",children:e.jsx(B,{className:"w-4 h-4 text-destructive"})})]},s.id)),v&&e.jsxs("button",{onClick:()=>{c(!0),g(!1)},className:"flex items-center gap-2 p-3 w-full text-primary hover:bg-primary/5 transition-colors border-t",children:[e.jsx(N,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Yangi til qo'shish"})]})]})}),e.jsx(k,{children:f&&e.jsx(x.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:()=>c(!1),children:e.jsxs(x.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:s=>s.stopPropagation(),className:"bg-card rounded-2xl p-6 w-full max-w-sm shadow-elevated",children:[e.jsx("h3",{className:"font-display font-semibold text-xl mb-4",children:"Yangi til qo'shish"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Qaysi tildan:"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["uz","ru","en"].map(s=>e.jsxs("button",{onClick:()=>j(s),className:`p-3 rounded-xl text-center transition-all ${o===s?"bg-primary text-primary-foreground":"bg-muted hover:bg-muted/80"}`,children:[e.jsx("span",{className:"text-xl block",children:l[s]}),e.jsx("span",{className:"text-xs",children:r[s][i]})]},s))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Qaysi tilga:"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["uz","ru","en"].map(s=>e.jsxs("button",{onClick:()=>b(s),className:`p-3 rounded-xl text-center transition-all ${d===s?"bg-primary text-primary-foreground":"bg-muted hover:bg-muted/80"}`,children:[e.jsx("span",{className:"text-xl block",children:l[s]}),e.jsx("span",{className:"text-xs",children:r[s][i]})]},s))})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx(p,{variant:"outline",onClick:()=>c(!1),className:"flex-1",children:"Bekor qilish"}),e.jsx(p,{onClick:_,className:"flex-1 gradient-primary text-primary-foreground",children:"Qo'shish"})]})]})})})]})};export{R as L};
