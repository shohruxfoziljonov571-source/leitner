import{c as A,u as U,r as s,j as e,m as l,B as R,X as de,h as me,e as ve,L as Z,f as Ne,P as we}from"./index-CF1n9Zjo.js";import{a as ke,u as Se}from"./useGamification-DjbjH3Ij.js";import{u as ze}from"./useWeeklyChallenge-BHU32hsq.js";import{u as xe,V as Q,X as Re}from"./XpPopup-DoUj1X0S.js";import{A as ue,P as Ce}from"./play-My47hlsz.js";import{A as E}from"./index-DxdTuE2l.js";import{E as Le}from"./eye-BPaGpaNT.js";import{X as ne}from"./XpBar-swDK-bPj.js";import{T as Te}from"./timer-CJtvK6nT.js";import{F as _e}from"./flame-KYC3gaCI.js";import{Z as Y}from"./zap-BqAtVl3N.js";import"./progress-C_tDqEH4.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=A("Coffee",[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=A("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=A("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=A("PartyPopper",[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=A("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=A("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=A("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]),Pe={uz:"O'zbekcha",ru:"–†—É—Å—Å–∫–∏–π",en:"English"},le={uz:"üá∫üáø",ru:"üá∑üá∫",en:"üá¨üáß"},Ie=({word:t,onAnswer:n,isReversed:r=!1})=>{const{t:a}=U(),[N,h]=s.useState(!1),[o,w]=s.useState(null),{speak:y,isSpeaking:d,isSupported:j,stop:c}=xe(),g=r?t.translatedWord:t.originalWord,k=r?t.originalWord:t.translatedWord,u=r?t.targetLanguage:t.sourceLanguage,x=r?t.sourceLanguage:t.targetLanguage,S=()=>{N||h(!0)},L=z=>{w(z),setTimeout(()=>{n(z),h(!1),w(null)},500)},C=(z,_)=>{d?c():y(z,{lang:_})};return e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"w-full max-w-md mx-auto",children:[e.jsxs("div",{className:`relative min-h-[320px] rounded-3xl shadow-elevated p-6 transition-all duration-300 ${o===!0?"bg-primary/10 ring-2 ring-primary":o===!1?"bg-destructive/10 ring-2 ring-destructive":"bg-card"}`,children:[e.jsxs("div",{className:"absolute top-4 right-4 px-3 py-1 rounded-full text-sm font-medium",style:{backgroundColor:`hsl(var(--box-${t.boxNumber}) / 0.15)`,color:`hsl(var(--box-${t.boxNumber}))`},children:[a("box")," ",t.boxNumber]}),e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx("span",{className:"text-2xl",children:le[u]}),e.jsx(ue,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-2xl",children:le[x]})]}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:Pe[u]}),e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("h2",{className:"font-display font-bold text-3xl text-foreground",children:g}),j&&e.jsx(R,{variant:"ghost",size:"icon",onClick:()=>C(g,u),className:`rounded-full transition-all ${d?"text-primary animate-pulse":"text-muted-foreground hover:text-primary"}`,children:d?e.jsx(K,{className:"w-5 h-5"}):e.jsx(Q,{className:"w-5 h-5"})})]})]}),e.jsx(E,{mode:"wait",children:N?e.jsxs(l.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0},children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:a("translation")}),e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("p",{className:"font-display font-semibold text-2xl text-primary",children:k}),j&&e.jsx(R,{variant:"ghost",size:"icon",onClick:()=>C(k,x),className:`rounded-full transition-all ${d?"text-primary animate-pulse":"text-muted-foreground hover:text-primary"}`,children:d?e.jsx(K,{className:"w-5 h-5"}):e.jsx(Q,{className:"w-5 h-5"})})]})]}),t.exampleSentences.length>0&&e.jsxs("div",{className:"mb-6 p-4 bg-muted/50 rounded-xl",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:a("examples")}),t.exampleSentences.map((z,_)=>e.jsxs("p",{className:"text-sm text-foreground italic",children:["‚Ä¢ ",z]},_))]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(R,{onClick:()=>L(!1),variant:"outline",size:"lg",className:"flex-1 gap-2 border-destructive text-destructive hover:bg-destructive hover:text-destructive-foreground",children:[e.jsx(de,{className:"w-5 h-5"}),a("incorrect")]}),e.jsxs(R,{onClick:()=>L(!0),size:"lg",className:"flex-1 gap-2 bg-primary hover:bg-primary/90",children:[e.jsx(me,{className:"w-5 h-5"}),a("correct")]})]})]},"revealed"):e.jsx(l.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-center",children:e.jsxs(R,{onClick:S,size:"lg",className:"gap-2 gradient-primary text-primary-foreground",children:[e.jsx(Le,{className:"w-5 h-5"}),a("showAnswer")]})},"hidden")})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:[t.timesReviewed," ",a("reviewsToday").toLowerCase()]})})]})},Fe={uz:"O'zbekcha",ru:"–†—É—Å—Å–∫–∏–π",en:"English"},oe={uz:"üá∫üáø",ru:"üá∑üá∫",en:"üá¨üáß"},ce=t=>{const n=[...t];for(let r=n.length-1;r>0;r--){const a=Math.floor(Math.random()*(r+1));[n[r],n[a]]=[n[a],n[r]]}return n},Ee=({word:t,allWords:n,onAnswer:r,isReversed:a=!1})=>{const{t:N}=U(),{speak:h,isSpeaking:o,isSupported:w,stop:y}=xe(),[d,j]=s.useState(null),[c,g]=s.useState(!1),k=a?t.translatedWord:t.originalWord,u=a?t.originalWord:t.translatedWord,x=a?t.targetLanguage:t.sourceLanguage,S=a?t.sourceLanguage:t.targetLanguage,L=s.useMemo(()=>{const m=n.filter(v=>v.id!==t.id).map(v=>a?v.originalWord:v.translatedWord).filter((v,$,B)=>B.indexOf(v)===$),W=[...ce(m).slice(0,3),u];return ce(W)},[t.id,n,a,u]),C=m=>{if(c)return;j(m),g(!0);const f=m===u;setTimeout(()=>{r(f),j(null),g(!1)},1200)},z=(m,f)=>{o?y():h(m,{lang:f})},_=m=>c?m===u?"bg-primary/20 border-2 border-primary text-primary":m===d&&m!==u?"bg-destructive/20 border-2 border-destructive text-destructive":"bg-card border-2 border-border opacity-50":"bg-card hover:bg-muted border-2 border-border hover:border-primary";return e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"w-full max-w-md mx-auto",children:[e.jsxs("div",{className:"relative min-h-[400px] rounded-3xl shadow-elevated p-6 bg-card",children:[e.jsxs("div",{className:"absolute top-4 right-4 px-3 py-1 rounded-full text-sm font-medium",style:{backgroundColor:`hsl(var(--box-${t.boxNumber}) / 0.15)`,color:`hsl(var(--box-${t.boxNumber}))`},children:[N("box")," ",t.boxNumber]}),e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx("span",{className:"text-2xl",children:oe[x]}),e.jsx(ue,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-2xl",children:oe[S]})]}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:Fe[x]}),e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("h2",{className:"font-display font-bold text-3xl text-foreground",children:k}),w&&e.jsx(R,{variant:"ghost",size:"icon",onClick:()=>z(k,x),className:`rounded-full transition-all ${o?"text-primary animate-pulse":"text-muted-foreground hover:text-primary"}`,children:o?e.jsx(K,{className:"w-5 h-5"}):e.jsx(Q,{className:"w-5 h-5"})})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-4",children:"To'g'ri tarjimani tanlang:"})]}),e.jsx("div",{className:"grid grid-cols-1 gap-3",children:L.map((m,f)=>e.jsxs(l.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:f*.1},onClick:()=>C(m),disabled:c,className:`p-4 rounded-xl font-medium text-left transition-all duration-200 flex items-center justify-between ${_(m)}`,children:[e.jsx("span",{children:m}),c&&m===u&&e.jsx(me,{className:"w-5 h-5 text-primary"}),c&&m===d&&m!==u&&e.jsx(de,{className:"w-5 h-5 text-destructive"})]},`${m}-${f}`))}),c&&e.jsx(l.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mt-4 text-center",children:d===u?e.jsx("p",{className:"text-primary font-semibold",children:"‚úì To'g'ri!"}):e.jsx("p",{className:"text-destructive font-semibold",children:"‚úó Noto'g'ri"})})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:[t.timesReviewed," marta takrorlangan"]})})]})},q=25*60,X=5*60,Oe=({onBreakStart:t,onBreakEnd:n})=>{const[r,a]=s.useState(q),[N,h]=s.useState(!1),[o,w]=s.useState(!1),[y,d]=s.useState(!1),j=x=>{const S=Math.floor(x/60),L=x%60;return`${S.toString().padStart(2,"0")}:${L.toString().padStart(2,"0")}`},c=s.useCallback(()=>{a(o?X:q),h(!1)},[o]),g=s.useCallback(()=>{w(!0),a(X),h(!0),d(!1),t==null||t()},[t]),k=s.useCallback(()=>{d(!1),a(q),h(!0)},[]);s.useEffect(()=>{let x=null;return N&&r>0?x=setInterval(()=>{a(S=>S-1)},1e3):r===0&&(o?(w(!1),a(q),h(!0),n==null||n()):(h(!1),d(!0))),()=>{x&&clearInterval(x)}},[N,r,o,n]);const u=o?(X-r)/X*100:(q-r)/q*100;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium transition-colors ${o?"bg-amber-500/20 text-amber-600":"bg-primary/10 text-primary"}`,children:[o?e.jsx(ie,{className:"w-4 h-4"}):e.jsx(Te,{className:"w-4 h-4"}),e.jsx("span",{className:"font-mono",children:j(r)})]}),e.jsxs("svg",{className:"absolute inset-0 w-full h-full -rotate-90 pointer-events-none",viewBox:"0 0 100 100",children:[e.jsx("circle",{cx:"50",cy:"50",r:"48",fill:"none",strokeWidth:"2",className:"stroke-primary/20"}),e.jsx("circle",{cx:"50",cy:"50",r:"48",fill:"none",strokeWidth:"2",strokeDasharray:`${u*3.02} 302`,className:o?"stroke-amber-500":"stroke-primary",strokeLinecap:"round"})]})]}),e.jsx(R,{variant:"ghost",size:"icon",onClick:()=>h(!N),className:"h-8 w-8 rounded-full",children:N?e.jsx(qe,{className:"w-4 h-4"}):e.jsx(Ce,{className:"w-4 h-4"})}),e.jsx(R,{variant:"ghost",size:"icon",onClick:c,className:"h-8 w-8 rounded-full",children:e.jsx($e,{className:"w-4 h-4"})})]}),e.jsx(E,{children:y&&e.jsx(l.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-background/80 backdrop-blur-sm",children:e.jsxs(l.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-card p-8 rounded-3xl shadow-elevated max-w-sm mx-4 text-center",children:[e.jsx(l.div,{animate:{rotate:[0,10,-10,0]},transition:{repeat:1/0,duration:2},className:"w-20 h-20 mx-auto mb-4 rounded-full bg-amber-500/20 flex items-center justify-center",children:e.jsx(ie,{className:"w-10 h-10 text-amber-500"})}),e.jsx("h3",{className:"font-display font-bold text-xl mb-2",children:"Dam olish vaqti! ‚òï"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"25 daqiqa o'qidingiz. 5 daqiqa dam oling!"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(R,{variant:"outline",onClick:k,className:"flex-1",children:"O'tkazib yuborish"}),e.jsx(R,{onClick:g,className:"flex-1 bg-amber-500 hover:bg-amber-600 text-white",children:"Dam olish"})]})]})})})]})},De=({streak:t,show:n})=>{const a=t>=20?{color:"text-orange-500",bg:"bg-orange-500/20",label:"üî• UNSTOPPABLE!"}:t>=15?{color:"text-red-500",bg:"bg-red-500/20",label:"üí• ON FIRE!"}:t>=10?{color:"text-amber-500",bg:"bg-amber-500/20",label:"‚ö° AMAZING!"}:t>=5?{color:"text-yellow-500",bg:"bg-yellow-500/20",label:"‚ú® GREAT!"}:t>=3?{color:"text-primary",bg:"bg-primary/20",label:"üëç NICE!"}:{color:"text-muted-foreground",bg:"bg-muted",label:""};return t<2?null:e.jsx(E,{children:n&&e.jsx(l.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},className:"fixed top-20 left-1/2 -translate-x-1/2 z-40",children:e.jsxs(l.div,{animate:{scale:[1,1.1,1]},transition:{repeat:1/0,duration:.5},className:`flex items-center gap-2 px-4 py-2 rounded-full ${a.bg} backdrop-blur-sm`,children:[e.jsx(l.div,{animate:{rotate:[0,-10,10,0]},transition:{repeat:1/0,duration:.3},children:t>=10?e.jsx(_e,{className:`w-6 h-6 ${a.color}`}):e.jsx(Y,{className:`w-6 h-6 ${a.color}`})}),e.jsxs("span",{className:`font-bold text-lg ${a.color}`,children:["x",t]}),a.label&&e.jsx(l.span,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:`font-bold ${a.color}`,children:a.label})]})})})},he=s.memo(({isActive:t,onTimeout:n,timeLimit:r=10,resetTrigger:a})=>{const[N,h]=s.useState(100),[o,w]=s.useState(r),[y,d]=s.useState(!1),j=s.useRef(0),c=s.useRef(null),g=s.useRef(!1),k=s.useRef(n);s.useEffect(()=>{k.current=n},[n]);const u=s.useCallback(()=>{h(100),w(r),d(!1),g.current=!1,j.current=performance.now()},[r]);return s.useEffect(()=>{u()},[a,u]),s.useEffect(()=>{if(!t){c.current&&(cancelAnimationFrame(c.current),c.current=null);return}j.current=performance.now(),g.current=!1;const x=S=>{const L=(S-j.current)/1e3,C=Math.max(0,r-L),z=C/r*100;if(h(z),w(Math.ceil(C)),d(C<=3),C<=0&&!g.current){g.current=!0,k.current();return}C>0&&(c.current=requestAnimationFrame(x))};return c.current=requestAnimationFrame(x),()=>{c.current&&(cancelAnimationFrame(c.current),c.current=null)}},[t,r]),t?e.jsxs(l.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"flex items-center gap-2 sm:gap-3",children:[e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[e.jsx(l.div,{animate:y?{scale:[1,1.15,1],rotate:[0,-5,5,0]}:{},transition:{repeat:y?1/0:0,duration:.4,ease:"easeInOut"},children:e.jsx(Y,{className:`w-4 h-4 sm:w-5 sm:h-5 transition-colors duration-200 ${y?"text-destructive":"text-amber-500"}`})}),e.jsxs("span",{className:`font-mono font-bold text-base sm:text-lg tabular-nums transition-colors duration-200 ${y?"text-destructive":"text-foreground"}`,children:[o,"s"]})]}),e.jsx("div",{className:"w-16 sm:w-24 h-1.5 sm:h-2 bg-muted rounded-full overflow-hidden",children:e.jsx(l.div,{className:`h-full rounded-full transition-colors duration-300 ${y?"bg-destructive":"bg-amber-500"}`,style:{width:`${N}%`,transition:"width 50ms linear"}})})]}):null});he.displayName="SpeedModeTimer";const Xe=t=>{const n=[...t];for(let r=n.length-1;r>0;r--){const a=Math.floor(Math.random()*(r+1));[n[r],n[a]]=[n[a],n[r]]}return n},st=()=>{const{t}=U(),{activeLanguage:n}=ve(),{getWordsForReview:r,reviewWord:a,isLoading:N,stats:h,words:o}=ke(),{addXp:w,checkAndUnlockAchievements:y,XP_PER_CORRECT:d,XP_PER_INCORRECT:j,level:c}=Se(),{userParticipation:g,updateParticipantStats:k}=ze(),[u,x]=s.useState(0),[S,L]=s.useState(new Set),[C,z]=s.useState(!1),[_,m]=s.useState(0),[f,W]=s.useState(null),[v,$]=s.useState(0),[B,G]=s.useState(!1),[pe,J]=s.useState(0),[ee,te]=s.useState(!1),P=s.useRef(null),I=s.useRef(null),se=s.useMemo(()=>{const i=new Date;return o.filter(F=>new Date(F.next_review_time)<=i)},[o]),V=s.useMemo(()=>Xe(se).map(F=>({word:F,isReversed:Math.random()<.5})),[se]),ae=s.useMemo(()=>V.filter(i=>!S.has(i.word.id)),[V,S]),fe=s.useMemo(()=>o.map(i=>({id:i.id,originalWord:i.original_word,translatedWord:i.translated_word,sourceLanguage:i.source_language,targetLanguage:i.target_language,exampleSentences:i.example_sentences||[],boxNumber:i.box_number,nextReviewTime:new Date(i.next_review_time),timesReviewed:i.times_reviewed,timesCorrect:i.times_correct,timesIncorrect:i.times_incorrect,createdAt:new Date(i.created_at),lastReviewed:i.last_reviewed?new Date(i.last_reviewed):null})),[o]),p=ae[0],O=V.length,D=S.size,ge=s.useCallback(async()=>{p&&(await a(p.word.id,!1),L(i=>new Set([...i,p.word.id])),x(i=>i+1),$(0),J(i=>i+1))},[p,a]),re=s.useCallback(async i=>{if(p){await a(p.word.id,i),L(T=>new Set([...T,p.word.id])),x(T=>T+1),i?($(T=>T+1),G(!0),I.current&&clearTimeout(I.current),I.current=setTimeout(()=>G(!1),2e3)):($(0),G(!1));const F=v>=10?5:v>=5?3:v>=3?1:0,H=i?d+F:j;m(H),z(!0),await w(H,i?"correct_answer":"incorrect_answer"),g&&await k(H,1,i?1:0),P.current&&clearTimeout(P.current),P.current=setTimeout(()=>z(!1),1500);const ye=o.reduce((T,je)=>T+je.times_reviewed,0)+1;await y({totalWords:o.length,streak:h.streak,totalReviews:ye,level:c}),f==="speed"&&J(T=>T+1)}},[p,a,d,j,w,o,y,h.streak,c,g,k,v,f]);if(s.useEffect(()=>()=>{P.current&&clearTimeout(P.current),I.current&&clearTimeout(I.current)},[]),N)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-pulse-soft text-muted-foreground",children:t("loading")})});if(!n)return e.jsx("div",{className:"min-h-screen pb-24 md:pt-24 md:pb-8",children:e.jsxs("div",{className:"container mx-auto px-4 py-6 flex flex-col items-center justify-center min-h-[60vh]",children:[e.jsx("p",{className:"text-muted-foreground",children:"Avval tilni tanlang"}),e.jsx(Z,{to:"/",children:e.jsx(R,{className:"mt-4",children:"Bosh sahifaga"})})]})});if(O===0)return e.jsx("div",{className:"min-h-screen pb-24 md:pt-24 md:pb-8",children:e.jsx("div",{className:"container mx-auto px-4 py-6 flex flex-col items-center justify-center min-h-[60vh]",children:e.jsxs(l.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center",children:[e.jsx("div",{className:"w-24 h-24 mx-auto mb-6 rounded-3xl bg-muted flex items-center justify-center",children:e.jsx(Ne,{className:"w-12 h-12 text-muted-foreground"})}),e.jsx("h2",{className:"font-display font-bold text-2xl mb-2",children:t("noWordsToReview")}),e.jsx("p",{className:"text-muted-foreground mb-8 max-w-sm",children:"Hozircha takrorlash uchun so'z yo'q. Yangi so'zlar qo'shing yoki keyinroq qaytib keling!"}),e.jsx(Z,{to:"/add",children:e.jsxs(R,{size:"lg",className:"gap-2 gradient-primary text-primary-foreground",children:[e.jsx(we,{className:"w-5 h-5"}),t("addWord")]})})]})})});if(ae.length===0&&D>0)return e.jsx("div",{className:"min-h-screen pb-24 md:pt-24 md:pb-8",children:e.jsx("div",{className:"container mx-auto px-4 py-6 flex flex-col items-center justify-center min-h-[60vh]",children:e.jsxs(l.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center",children:[e.jsx(l.div,{initial:{rotate:0},animate:{rotate:[0,-10,10,-10,0]},transition:{delay:.3,duration:.5},className:"w-24 h-24 mx-auto mb-6 rounded-3xl gradient-primary flex items-center justify-center",children:e.jsx(We,{className:"w-12 h-12 text-primary-foreground"})}),e.jsx("h2",{className:"font-display font-bold text-2xl mb-2",children:t("congratulations")}),e.jsx("p",{className:"text-muted-foreground mb-2",children:t("allDone")}),e.jsxs("p",{className:"text-lg font-medium text-primary mb-4",children:[D," so'z takrorlandi!"]}),e.jsx("div",{className:"mb-8",children:e.jsx(ne,{})}),e.jsx(Z,{to:"/",children:e.jsx(R,{size:"lg",variant:"outline",className:"gap-2",children:t("back")})})]})})});if(!f)return e.jsx("div",{className:"min-h-screen pb-24 md:pt-24 md:pb-8",children:e.jsxs("div",{className:"container mx-auto px-4 py-6",children:[e.jsxs(l.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-8",children:[e.jsx("h1",{className:"font-display font-bold text-2xl text-foreground mb-2",children:"O'rganish rejimini tanlang"}),e.jsxs("p",{className:"text-muted-foreground",children:[O," ta so'z takrorlash uchun tayyor"]})]}),e.jsxs("div",{className:"grid gap-4 max-w-md mx-auto",children:[e.jsx(l.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1},onClick:()=>W("flashcard"),className:"p-6 rounded-3xl bg-card shadow-elevated hover:shadow-lg transition-all border-2 border-transparent hover:border-primary text-left group",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 rounded-2xl bg-primary/10 text-primary group-hover:bg-primary group-hover:text-primary-foreground transition-colors",children:e.jsx(Ae,{className:"w-8 h-8"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg mb-1",children:"Flashcard"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"So'zni ko'ring, javobni eslang va o'zingizni tekshiring"})]})]})}),e.jsx(l.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2},onClick:()=>W("quiz"),className:"p-6 rounded-3xl bg-card shadow-elevated hover:shadow-lg transition-all border-2 border-transparent hover:border-primary text-left group",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 rounded-2xl bg-accent/50 text-accent-foreground group-hover:bg-primary group-hover:text-primary-foreground transition-colors",children:e.jsx(Me,{className:"w-8 h-8"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg mb-1",children:"Quiz (4 variant)"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"4 ta variantdan to'g'ri javobni tanlang - o'yin rejimi"})]})]})}),e.jsx(l.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3},onClick:()=>W("speed"),className:"p-6 rounded-3xl bg-card shadow-elevated hover:shadow-lg transition-all border-2 border-transparent hover:border-amber-500 text-left group",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 rounded-2xl bg-amber-500/20 text-amber-500 group-hover:bg-amber-500 group-hover:text-white transition-colors",children:e.jsx(Y,{className:"w-8 h-8"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-lg mb-1 flex items-center gap-2",children:["Tezlik rejimi",e.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-amber-500/20 text-amber-500",children:"10s"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"10 soniya ichida javob bering - adrenalin oshadi!"})]})]})})]})]})});const b=p==null?void 0:p.word,M=b?{id:b.id,originalWord:b.original_word,translatedWord:b.translated_word,sourceLanguage:b.source_language,targetLanguage:b.target_language,exampleSentences:b.example_sentences||[],boxNumber:b.box_number,nextReviewTime:new Date(b.next_review_time),timesReviewed:b.times_reviewed,timesCorrect:b.times_correct,timesIncorrect:b.times_incorrect,createdAt:new Date(b.created_at),lastReviewed:b.last_reviewed?new Date(b.last_reviewed):null}:null,be=()=>{switch(f){case"flashcard":return"üìö Flashcard";case"quiz":return"üéÆ Quiz";case"speed":return"‚ö° Tezlik";default:return""}};return e.jsxs("div",{className:"min-h-screen pb-24 md:pt-24 md:pb-8",children:[e.jsx(Re,{amount:_,show:C}),e.jsx(De,{streak:v,show:B}),e.jsx(E,{children:ee&&e.jsx(l.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-40 flex items-center justify-center bg-background/90 backdrop-blur-md",children:e.jsxs("div",{className:"text-center",children:[e.jsx(l.div,{animate:{scale:[1,1.1,1]},transition:{repeat:1/0,duration:2},className:"text-6xl mb-4",children:"‚òï"}),e.jsx("h2",{className:"font-display font-bold text-2xl mb-2",children:"Dam olish vaqti"}),e.jsx("p",{className:"text-muted-foreground",children:"5 daqiqa dam oling..."})]})})}),e.jsxs("div",{className:"container mx-auto px-4 py-6",children:[e.jsxs(l.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2 flex-wrap gap-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"font-display font-bold text-2xl text-foreground",children:t("learn")}),e.jsx("button",{onClick:()=>W(null),className:"text-xs px-2 py-1 rounded-full bg-muted text-muted-foreground hover:bg-primary/10 hover:text-primary transition-colors",children:be()})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[f==="speed"&&e.jsx(he,{isActive:!ee&&!!M,onTimeout:ge,timeLimit:10,resetTrigger:pe}),e.jsx(Oe,{onBreakStart:()=>te(!0),onBreakEnd:()=>te(!1)}),e.jsx(ne,{compact:!0})]})]}),e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-sm text-muted-foreground",children:[D+1," / ",O," so'z"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[v>=3&&e.jsxs("span",{className:"text-sm font-medium text-amber-500",children:["üî• x",v," combo"]}),e.jsxs("span",{className:"text-sm text-primary font-medium",children:["+",d," XP"]})]})]}),e.jsx("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:e.jsx(l.div,{initial:{width:0},animate:{width:`${D/O*100}%`},className:"h-full gradient-primary rounded-full",transition:{duration:.3}})})]}),e.jsxs(E,{mode:"wait",children:[M&&f==="flashcard"&&e.jsx(Ie,{word:M,onAnswer:re,isReversed:p==null?void 0:p.isReversed},M.id),M&&(f==="quiz"||f==="speed")&&e.jsx(Ee,{word:M,allWords:fe,onAnswer:re,isReversed:p==null?void 0:p.isReversed},M.id)]})]})]})};export{st as default};
