import{c as T,r as u,j as e,m as v,P as X,B as S,h as ae,b as z,a1 as Ce,i as ze,q as Pe,n as R,k as E,t as De,l as O,p as _e,d as Re,a as ie,e as Te,s as Q,u as Ee,a2 as Me,L as W,g as Ie}from"./index-CF1n9Zjo.js";import{I as ne}from"./input-CzQzjchC.js";import{u as qe,F as re}from"./useCategories-BiGDDyrr.js";import{D as Be,a as Oe,b as Ke,c as Le,d as He}from"./dialog-Dy2krPD9.js";import{T as Ae}from"./trash-2-Chs7nWw8.js";import{B as Z,a as V,S as Ve}from"./switch-BDFle0JM.js";import{L as $e}from"./label-PvibihnJ.js";import{u as Ge,c as oe}from"./index-C7hV5Im-.js";import{T as Fe}from"./target-C9LD_DSL.js";import{U as Ue}from"./user-DYN4JpyK.js";import"./index-s5eUj8tl.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=T("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=T("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=T("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=T("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=T("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=T("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]),Qe=["ðŸ“","ðŸ ","ðŸ’¼","âœˆï¸","ðŸ½ï¸","ðŸ¥","âš½","ðŸ‘•","ðŸ’»","ðŸŽµ","ðŸ“š","ðŸŽ¬","ðŸ›’","ðŸ’°","ðŸŽ®","ðŸŒ"],We=({selectedCategory:t,onSelectCategory:s,mode:a="select"})=>{const{categories:n,isLoading:l,addCategory:d,deleteCategory:o,initializeDefaultCategories:c}=qe(),[h,p]=u.useState(!1),[f,i]=u.useState(""),[r,x]=u.useState("ðŸ“"),j=async()=>{f.trim()&&(await d({name:f.trim(),icon:r,color:`hsl(${Math.random()*360}, 70%, 50%)`}),i(""),x("ðŸ“"),p(!1))};return l?e.jsx("div",{className:"animate-pulse h-10 bg-muted rounded-xl"}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>s==null?void 0:s(null),className:`px-4 py-2 rounded-full text-sm font-medium transition-all flex items-center gap-2 ${t===null?"bg-primary text-primary-foreground shadow-md":"bg-muted hover:bg-muted/80 text-foreground"}`,children:[e.jsx(re,{className:"w-4 h-4"}),"Hammasi"]}),n.map(m=>e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>s==null?void 0:s(m.id),className:`px-4 py-2 rounded-full text-sm font-medium transition-all flex items-center gap-2 ${t===m.id?"bg-primary text-primary-foreground shadow-md":"bg-muted hover:bg-muted/80 text-foreground"}`,children:[e.jsx("span",{children:m.icon}),m.name]},m.id)),e.jsxs(Be,{open:h,onOpenChange:p,children:[e.jsx(Oe,{asChild:!0,children:e.jsxs(v.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-4 py-2 rounded-full text-sm font-medium bg-primary/10 text-primary hover:bg-primary/20 transition-all flex items-center gap-2",children:[e.jsx(X,{className:"w-4 h-4"}),"Yangi"]})}),e.jsxs(Ke,{className:"sm:max-w-md",children:[e.jsx(Le,{children:e.jsx(He,{children:"Yangi kategoriya"})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-muted flex items-center justify-center text-2xl",children:r}),e.jsx(ne,{placeholder:"Kategoriya nomi",value:f,onChange:m=>i(m.target.value),className:"flex-1"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Emoji tanlang:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Qe.map(m=>e.jsx("button",{onClick:()=>x(m),className:`w-10 h-10 rounded-lg text-xl flex items-center justify-center transition-all ${r===m?"bg-primary text-primary-foreground":"bg-muted hover:bg-muted/80"}`,children:m},m))})]}),e.jsxs(S,{onClick:j,className:"w-full gap-2",children:[e.jsx(ae,{className:"w-4 h-4"}),"Qo'shish"]})]})]})]})]}),n.length===0&&e.jsxs(v.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 rounded-xl bg-primary/5 border border-primary/10",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Kategoriyalar hali yo'q. Standart kategoriyalarni qo'shishni xohlaysizmi?"}),e.jsxs(S,{variant:"outline",size:"sm",onClick:c,className:"gap-2",children:[e.jsx(X,{className:"w-4 h-4"}),"Standart kategoriyalarni qo'shish"]})]}),a==="manage"&&n.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Kategoriyalarni boshqarish:"}),e.jsx("div",{className:"space-y-2",children:n.map(m=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-xl bg-muted/50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-xl",children:m.icon}),e.jsx("span",{className:"font-medium",children:m.name})]}),e.jsx(S,{variant:"ghost",size:"icon",onClick:()=>o(m.id),className:"text-destructive hover:text-destructive hover:bg-destructive/10",children:e.jsx(Ae,{className:"w-4 h-4"})})]},m.id))})]})]})},Ze=()=>{const[t,s]=u.useState(!1),[a,n]=u.useState("default"),[l,d]=u.useState({enabled:!1,time:"09:00"});u.useEffect(()=>{"Notification"in window&&(s(!0),n(Notification.permission));const i=localStorage.getItem("notification_settings");if(i)try{d(JSON.parse(i))}catch(r){console.error("Error parsing notification settings:",r)}},[]);const o=u.useCallback(async()=>{if(!t)return z.error("Brauzeringiz bildirishnomalarni qo'llab-quvvatlamaydi"),!1;try{const i=await Notification.requestPermission();return n(i),i==="granted"?(z.success("Bildirishnomalar yoqildi!"),!0):(i==="denied"&&z.error("Bildirishnomalar rad etildi"),!1)}catch(i){return console.error("Error requesting notification permission:",i),!1}},[t]),c=u.useCallback((i,r,x=0)=>{a==="granted"&&setTimeout(()=>{new Notification(i,{body:r,icon:"/favicon.ico",badge:"/favicon.ico",tag:"leitner-reminder",requireInteraction:!0})},x)},[a]),h=u.useCallback(i=>{const r={...l,...i};d(r),localStorage.setItem("notification_settings",JSON.stringify(r)),r.enabled&&a==="granted"&&p(r.time)},[l,a]),p=u.useCallback(i=>{const[r,x]=i.split(":").map(Number),j=new Date,m=new Date;m.setHours(r,x,0,0),m<=j&&m.setDate(m.getDate()+1);const g=m.getTime()-j.getTime();localStorage.setItem("next_reminder",m.toISOString()),g<24*60*60*1e3&&setTimeout(()=>{c("Takrorlash vaqti! ðŸ“š","So'zlaringizni takrorlash vaqti keldi. O'rganishni davom eting!")},g)},[c]),f=u.useCallback(()=>{if(a!=="granted"){z.error("Avval ruxsat bering");return}c("Test bildirish ðŸŽ‰","Bildirishnomalar to'g'ri ishlayapti!")},[a,c]);return{isSupported:t,permission:a,settings:l,requestPermission:o,updateSettings:h,scheduleNotification:c,testNotification:f}},et=()=>{const{isSupported:t,permission:s,settings:a,requestPermission:n,updateSettings:l,testNotification:d}=Ze();return t?e.jsxs("div",{className:"space-y-4",children:[s==="default"&&e.jsxs(v.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 rounded-xl bg-primary/10 border border-primary/20",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(V,{className:"w-5 h-5 text-primary"}),e.jsx("p",{className:"text-sm font-medium",children:"Bildirishnomalarni yoqish"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Kunlik eslatmalar olish uchun ruxsat bering"}),e.jsx(S,{onClick:n,size:"sm",className:"w-full",children:"Ruxsat berish"})]}),s==="denied"&&e.jsxs("div",{className:"p-4 rounded-xl bg-destructive/10 border border-destructive/20",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(Z,{className:"w-5 h-5 text-destructive"}),e.jsx("p",{className:"text-sm font-medium text-destructive",children:"Ruxsat rad etilgan"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Brauzer sozlamalaridan bildirishnomalarni yoqing"})]}),s==="granted"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl bg-muted/50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(V,{className:"w-5 h-5 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Kunlik eslatmalar"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Takrorlash vaqtini eslatish"})]})]}),e.jsx(Ve,{checked:a.enabled,onCheckedChange:o=>l({enabled:o})})]}),a.enabled&&e.jsxs(v.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"p-4 rounded-xl bg-muted/50",children:[e.jsx($e,{className:"text-sm font-medium mb-2 block",children:"Eslatma vaqti"}),e.jsx(ne,{type:"time",value:a.time,onChange:o=>l({time:o.target.value}),className:"w-full"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Har kuni shu vaqtda eslatma olasiz"})]}),e.jsxs(S,{variant:"outline",size:"sm",onClick:d,className:"w-full gap-2",children:[e.jsx(Xe,{className:"w-4 h-4"}),"Test bildirish"]})]})]}):e.jsxs("div",{className:"p-4 rounded-xl bg-muted/50 text-center",children:[e.jsx(Z,{className:"w-8 h-8 mx-auto mb-2 text-muted-foreground"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Brauzeringiz bildirishnomalarni qo'llab-quvvatlamaydi"})]})};var le=["PageUp","PageDown"],ce=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],de={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},M="Slider",[$,tt,st]=Ce(M),[me,Tt]=ze(M,[st]),[at,K]=me(M),ue=u.forwardRef((t,s)=>{const{name:a,min:n=0,max:l=100,step:d=1,orientation:o="horizontal",disabled:c=!1,minStepsBetweenThumbs:h=0,defaultValue:p=[n],value:f,onValueChange:i=()=>{},onValueCommit:r=()=>{},inverted:x=!1,form:j,...m}=t,g=u.useRef(new Set),y=u.useRef(0),N=o==="horizontal"?it:nt,[b=[],I]=Pe({prop:f,defaultProp:p,onChange:w=>{var D;(D=[...g.current][y.current])==null||D.focus(),i(w)}}),L=u.useRef(b);function H(w){const k=dt(b,w);q(w,k)}function Se(w){q(w,y.current)}function ke(){const w=L.current[y.current];b[y.current]!==w&&r(b)}function q(w,k,{commit:D}={commit:!1}){const Y=xt(d),A=ft(Math.round((w-n)/d)*d+n,Y),B=oe(A,[n,l]);I((_=[])=>{const C=lt(_,B,k);if(ht(C,h*d)){y.current=C.indexOf(B);const J=String(C)!==String(_);return J&&D&&r(C),J?C:_}else return _})}return e.jsx(at,{scope:t.__scopeSlider,name:a,disabled:c,min:n,max:l,valueIndexToChangeRef:y,thumbs:g.current,values:b,orientation:o,form:j,children:e.jsx($.Provider,{scope:t.__scopeSlider,children:e.jsx($.Slot,{scope:t.__scopeSlider,children:e.jsx(N,{"aria-disabled":c,"data-disabled":c?"":void 0,...m,ref:s,onPointerDown:R(m.onPointerDown,()=>{c||(L.current=b)}),min:n,max:l,inverted:x,onSlideStart:c?void 0:H,onSlideMove:c?void 0:Se,onSlideEnd:c?void 0:ke,onHomeKeyDown:()=>!c&&q(n,0,{commit:!0}),onEndKeyDown:()=>!c&&q(l,b.length-1,{commit:!0}),onStepKeyDown:({event:w,direction:k})=>{if(!c){const A=le.includes(w.key)||w.shiftKey&&ce.includes(w.key)?10:1,B=y.current,_=b[B],C=d*A*k;q(_+C,B,{commit:!0})}}})})})})});ue.displayName=M;var[he,xe]=me(M,{startEdge:"left",endEdge:"right",size:"width",direction:1}),it=u.forwardRef((t,s)=>{const{min:a,max:n,dir:l,inverted:d,onSlideStart:o,onSlideMove:c,onSlideEnd:h,onStepKeyDown:p,...f}=t,[i,r]=u.useState(null),x=E(s,N=>r(N)),j=u.useRef(void 0),m=De(l),g=m==="ltr",y=g&&!d||!g&&d;function P(N){const b=j.current||i.getBoundingClientRect(),I=[0,b.width],H=U(I,y?[a,n]:[n,a]);return j.current=b,H(N-b.left)}return e.jsx(he,{scope:t.__scopeSlider,startEdge:y?"left":"right",endEdge:y?"right":"left",direction:y?1:-1,size:"width",children:e.jsx(fe,{dir:m,"data-orientation":"horizontal",...f,ref:x,style:{...f.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:N=>{const b=P(N.clientX);o==null||o(b)},onSlideMove:N=>{const b=P(N.clientX);c==null||c(b)},onSlideEnd:()=>{j.current=void 0,h==null||h()},onStepKeyDown:N=>{const I=de[y?"from-left":"from-right"].includes(N.key);p==null||p({event:N,direction:I?-1:1})}})})}),nt=u.forwardRef((t,s)=>{const{min:a,max:n,inverted:l,onSlideStart:d,onSlideMove:o,onSlideEnd:c,onStepKeyDown:h,...p}=t,f=u.useRef(null),i=E(s,f),r=u.useRef(void 0),x=!l;function j(m){const g=r.current||f.current.getBoundingClientRect(),y=[0,g.height],N=U(y,x?[n,a]:[a,n]);return r.current=g,N(m-g.top)}return e.jsx(he,{scope:t.__scopeSlider,startEdge:x?"bottom":"top",endEdge:x?"top":"bottom",size:"height",direction:x?1:-1,children:e.jsx(fe,{"data-orientation":"vertical",...p,ref:i,style:{...p.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:m=>{const g=j(m.clientY);d==null||d(g)},onSlideMove:m=>{const g=j(m.clientY);o==null||o(g)},onSlideEnd:()=>{r.current=void 0,c==null||c()},onStepKeyDown:m=>{const y=de[x?"from-bottom":"from-top"].includes(m.key);h==null||h({event:m,direction:y?-1:1})}})})}),fe=u.forwardRef((t,s)=>{const{__scopeSlider:a,onSlideStart:n,onSlideMove:l,onSlideEnd:d,onHomeKeyDown:o,onEndKeyDown:c,onStepKeyDown:h,...p}=t,f=K(M,a);return e.jsx(O.span,{...p,ref:s,onKeyDown:R(t.onKeyDown,i=>{i.key==="Home"?(o(i),i.preventDefault()):i.key==="End"?(c(i),i.preventDefault()):le.concat(ce).includes(i.key)&&(h(i),i.preventDefault())}),onPointerDown:R(t.onPointerDown,i=>{const r=i.target;r.setPointerCapture(i.pointerId),i.preventDefault(),f.thumbs.has(r)?r.focus():n(i)}),onPointerMove:R(t.onPointerMove,i=>{i.target.hasPointerCapture(i.pointerId)&&l(i)}),onPointerUp:R(t.onPointerUp,i=>{const r=i.target;r.hasPointerCapture(i.pointerId)&&(r.releasePointerCapture(i.pointerId),d(i))})})}),pe="SliderTrack",ge=u.forwardRef((t,s)=>{const{__scopeSlider:a,...n}=t,l=K(pe,a);return e.jsx(O.span,{"data-disabled":l.disabled?"":void 0,"data-orientation":l.orientation,...n,ref:s})});ge.displayName=pe;var G="SliderRange",ye=u.forwardRef((t,s)=>{const{__scopeSlider:a,...n}=t,l=K(G,a),d=xe(G,a),o=u.useRef(null),c=E(s,o),h=l.values.length,p=l.values.map(r=>je(r,l.min,l.max)),f=h>1?Math.min(...p):0,i=100-Math.max(...p);return e.jsx(O.span,{"data-orientation":l.orientation,"data-disabled":l.disabled?"":void 0,...n,ref:c,style:{...t.style,[d.startEdge]:f+"%",[d.endEdge]:i+"%"}})});ye.displayName=G;var F="SliderThumb",ve=u.forwardRef((t,s)=>{const a=tt(t.__scopeSlider),[n,l]=u.useState(null),d=E(s,c=>l(c)),o=u.useMemo(()=>n?a().findIndex(c=>c.ref.current===n):-1,[a,n]);return e.jsx(rt,{...t,ref:d,index:o})}),rt=u.forwardRef((t,s)=>{const{__scopeSlider:a,index:n,name:l,...d}=t,o=K(F,a),c=xe(F,a),[h,p]=u.useState(null),f=E(s,P=>p(P)),i=h?o.form||!!h.closest("form"):!0,r=_e(h),x=o.values[n],j=x===void 0?0:je(x,o.min,o.max),m=ct(n,o.values.length),g=r==null?void 0:r[c.size],y=g?mt(g,j,c.direction):0;return u.useEffect(()=>{if(h)return o.thumbs.add(h),()=>{o.thumbs.delete(h)}},[h,o.thumbs]),e.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[c.startEdge]:`calc(${j}% + ${y}px)`},children:[e.jsx($.ItemSlot,{scope:t.__scopeSlider,children:e.jsx(O.span,{role:"slider","aria-label":t["aria-label"]||m,"aria-valuemin":o.min,"aria-valuenow":x,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...d,ref:f,style:x===void 0?{display:"none"}:t.style,onFocus:R(t.onFocus,()=>{o.valueIndexToChangeRef.current=n})})}),i&&e.jsx(be,{name:l??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:x},n)]})});ve.displayName=F;var ot="RadioBubbleInput",be=u.forwardRef(({__scopeSlider:t,value:s,...a},n)=>{const l=u.useRef(null),d=E(l,n),o=Ge(s);return u.useEffect(()=>{const c=l.current;if(!c)return;const h=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(h,"value").set;if(o!==s&&f){const i=new Event("input",{bubbles:!0});f.call(c,s),c.dispatchEvent(i)}},[o,s]),e.jsx(O.input,{style:{display:"none"},...a,ref:d,defaultValue:s})});be.displayName=ot;function lt(t=[],s,a){const n=[...t];return n[a]=s,n.sort((l,d)=>l-d)}function je(t,s,a){const d=100/(a-s)*(t-s);return oe(d,[0,100])}function ct(t,s){return s>2?`Value ${t+1} of ${s}`:s===2?["Minimum","Maximum"][t]:void 0}function dt(t,s){if(t.length===1)return 0;const a=t.map(l=>Math.abs(l-s)),n=Math.min(...a);return a.indexOf(n)}function mt(t,s,a){const n=t/2,d=U([0,50],[0,n]);return(n-d(s)*a)*a}function ut(t){return t.slice(0,-1).map((s,a)=>t[a+1]-s)}function ht(t,s){if(s>0){const a=ut(t);return Math.min(...a)>=s}return!0}function U(t,s){return a=>{if(t[0]===t[1]||s[0]===s[1])return s[0];const n=(s[1]-s[0])/(t[1]-t[0]);return s[0]+n*(a-t[0])}}function xt(t){return(String(t).split(".")[1]||"").length}function ft(t,s){const a=Math.pow(10,s);return Math.round(t*a)/a}var Ne=ue,pt=ge,gt=ye,yt=ve;const we=u.forwardRef(({className:t,...s},a)=>e.jsxs(Ne,{ref:a,className:Re("relative flex w-full touch-none select-none items-center",t),...s,children:[e.jsx(pt,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:e.jsx(gt,{className:"absolute h-full bg-primary"})}),e.jsx(yt,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));we.displayName=Ne.displayName;const vt=[5,10,15,20,30,50],bt=()=>{const{user:t}=ie(),{activeLanguage:s}=Te(),[a,n]=u.useState(10),[l,d]=u.useState(!1),[o,c]=u.useState(!1),[h,p]=u.useState(10);u.useEffect(()=>{(async()=>{if(!t||!s)return;const{data:x}=await Q.from("user_stats").select("daily_goal").eq("user_id",t.id).eq("user_language_id",s.id).maybeSingle();x!=null&&x.daily_goal&&(n(x.daily_goal),p(x.daily_goal))})()},[t,s]);const f=r=>{n(r),c(r!==h)},i=async()=>{if(!(!t||!s)){d(!0);try{const{error:r}=await Q.from("user_stats").update({daily_goal:a}).eq("user_id",t.id).eq("user_language_id",s.id);if(r)throw r;p(a),c(!1),z.success(`Kunlik maqsad ${a} so'zga o'zgartirildi!`)}catch(r){console.error("Error saving daily goal:",r),z.error("Xatolik yuz berdi")}finally{d(!1)}}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-primary/10 flex items-center justify-center",children:e.jsx(Fe,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:"Kunlik maqsad"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Har kuni nechta so'z takrorlashni belgilang"})]})]}),e.jsxs("div",{className:"text-center py-4",children:[e.jsx(v.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"text-5xl font-bold text-primary",children:a},a),e.jsx("p",{className:"text-muted-foreground mt-1",children:"so'z / kun"})]}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:vt.map(r=>e.jsx(S,{variant:a===r?"default":"outline",size:"sm",onClick:()=>f(r),className:"h-10",children:r},r))}),e.jsxs("div",{className:"px-2 py-4",children:[e.jsx(we,{value:[a],onValueChange:([r])=>f(r),min:1,max:100,step:1,className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-2",children:[e.jsx("span",{children:"1"}),e.jsx("span",{children:"50"}),e.jsx("span",{children:"100"})]})]}),e.jsx("div",{className:"text-sm text-muted-foreground text-center p-3 bg-muted/50 rounded-xl",children:a<=10?e.jsx("span",{children:"ðŸŒ± Yaxshi boshlang'ich! Har kuni oz-ozdan o'rganing."}):a<=20?e.jsx("span",{children:"ðŸ’ª Zo'r! O'rtacha tezlikda o'rganasiz."}):a<=30?e.jsx("span",{children:"ðŸ”¥ Jiddiy yondashuv! Tez rivojlanasiz."}):e.jsx("span",{children:"ðŸš€ Super intensiv! Siz haqiqiy chempionsiz!"})}),o&&e.jsx(v.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:e.jsxs(S,{onClick:i,disabled:l,className:"w-full gap-2",children:[e.jsx(ae,{className:"w-4 h-4"}),l?"Saqlanmoqda...":"Saqlash"]})})]})},Et=()=>{const{t,language:s,setLanguage:a}=Ee(),{user:n,signOut:l}=ie(),{theme:d,setTheme:o,resolvedTheme:c}=Me(),h=[{code:"uz",name:"O'zbekcha",flag:"ðŸ‡ºðŸ‡¿"},{code:"ru",name:"Ð ÑƒÑÑÐºÐ¸Ð¹",flag:"ðŸ‡·ðŸ‡º"},{code:"en",name:"English",flag:"ðŸ‡¬ðŸ‡§"}],p=[{value:"light",label:"Yorug'",icon:se},{value:"dark",label:"Qorong'i",icon:te},{value:"system",label:"Tizim",icon:Je}],f=async()=>{confirm("Hisobdan chiqmoqchimisiz?")&&(await l(),z.success("Hisobdan chiqdingiz"))};return e.jsx("div",{className:"min-h-screen pb-24 md:pt-24 md:pb-8",children:e.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-lg",children:[e.jsxs(v.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-8",children:[e.jsxs("h1",{className:"font-display font-bold text-3xl text-foreground mb-2",children:[t("settings")," âš™ï¸"]}),e.jsx("p",{className:"text-muted-foreground",children:"Ilovani sozlash"})]}),e.jsx(W,{to:"/profile",children:e.jsx(v.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05},className:"bg-card rounded-2xl shadow-card p-5 mb-4 hover:shadow-elevated transition-shadow cursor-pointer",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full gradient-primary flex items-center justify-center",children:e.jsx(Ue,{className:"w-6 h-6 text-primary-foreground"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium",children:n==null?void 0:n.email}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Profilni ko'rish â†’"})]})]})})}),e.jsxs(v.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-card rounded-2xl shadow-card p-5 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-secondary/10 flex items-center justify-center",children:c==="dark"?e.jsx(te,{className:"w-5 h-5 text-secondary"}):e.jsx(se,{className:"w-5 h-5 text-secondary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:"Mavzu"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Ilova ko'rinishini tanlang"})]})]}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:p.map(i=>{const r=i.icon;return e.jsxs("button",{onClick:()=>o(i.value),className:`p-3 rounded-xl text-center transition-all flex flex-col items-center gap-2 ${d===i.value?"bg-primary text-primary-foreground":"bg-muted hover:bg-muted/80"}`,children:[e.jsx(r,{className:"w-5 h-5"}),e.jsx("span",{className:"text-xs font-medium",children:i.label})]},i.value)})})]}),e.jsxs(v.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.15},className:"bg-card rounded-2xl shadow-card p-5 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-primary/10 flex items-center justify-center",children:e.jsx(Ie,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:t("interfaceLanguage")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Ilova tilini tanlang"})]})]}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:h.map(i=>e.jsxs("button",{onClick:()=>a(i.code),className:`p-3 rounded-xl text-center transition-all ${s===i.code?"bg-primary text-primary-foreground":"bg-muted hover:bg-muted/80"}`,children:[e.jsx("span",{className:"text-2xl block mb-1",children:i.flag}),e.jsx("span",{className:"text-xs font-medium",children:i.name})]},i.code))})]}),e.jsx(v.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.17},className:"bg-card rounded-2xl shadow-card p-5 mb-4",children:e.jsx(bt,{})}),e.jsxs(v.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-card rounded-2xl shadow-card p-5 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-accent/10 flex items-center justify-center",children:e.jsx(re,{className:"w-5 h-5 text-accent"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:"Kategoriyalar"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"So'zlarni guruhlang"})]})]}),e.jsx(We,{mode:"manage"})]}),e.jsxs(v.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.25},className:"bg-card rounded-2xl shadow-card p-5 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-primary/10 flex items-center justify-center",children:e.jsx(V,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:"Bildirishnomalar"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Kunlik eslatmalar"})]})]}),e.jsx(et,{})]}),e.jsx(W,{to:"/about",children:e.jsx(v.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.25},className:"bg-card rounded-2xl shadow-card p-5 mb-4 hover:shadow-elevated transition-shadow cursor-pointer",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-accent/10 flex items-center justify-center",children:e.jsx(Ye,{className:"w-5 h-5 text-accent"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium",children:"Leitner tizimi haqida"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Qanday ishlaydi, qanday foydalanish â†’"})]})]})})}),e.jsxs(v.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-destructive/5 border border-destructive/20 rounded-2xl p-5",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-destructive/10 flex items-center justify-center",children:e.jsx(ee,{className:"w-5 h-5 text-destructive"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-destructive",children:"Hisobdan chiqish"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Ilovadan chiqish"})]})]}),e.jsxs(S,{variant:"outline",onClick:f,className:"w-full border-destructive text-destructive hover:bg-destructive hover:text-destructive-foreground",children:[e.jsx(ee,{className:"w-4 h-4 mr-2"}),"Chiqish"]})]}),e.jsx(v.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.35},className:"text-center text-sm text-muted-foreground mt-8",children:"Leitner tizimi bilan samarali o'rganing ðŸš€"})]})})};export{Et as default};
