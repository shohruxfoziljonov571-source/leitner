import{c as X,j as e,u as Se,r as o,m as L,g as Ft,B as O,P as Ht,b as P,X as Me,h as Ne,_ as ye,i as Ce,k as F,l as G,n as B,o as oe,p as Xt,q as $t,d as I,t as Vt,v as J,w as Yt,f as je,D as Ut,x as Gt,y as Kt,z as be,s as Qt,A as Jt,E as qe,e as Zt,L as ea}from"./index-H5eLpdEA.js";import{a as Oe,u as ta}from"./useGamification-BtiiQjBl.js";import{I as te}from"./input-CTxYhRwj.js";import{L as ie}from"./label-B269C1Du.js";import{S as aa,a as ra,b as sa,c as oa,d as Te,T as na,e as la}from"./select-DFHayVz_.js";import{u as ia,F as De}from"./useCategories-Ct9n2UPI.js";import{S as Be}from"./sparkles-TJtHbwcC.js";import{P as we,A as me}from"./progress-D-FsW8vX.js";import{B as ca}from"./badge-4vPmJYcu.js";import{u as da}from"./index-tqWPnzjf.js";import{L as ze}from"./loader-circle-CZ1hHvJY.js";import{C as ua,T as ma,a as ha,b as ce,c as de}from"./tabs-DZIfP3P_.js";import{c as Fe,T as pa,O as xa,W as fa,C as ga,a as va,D as ba,b as He,P as ya,R as ja}from"./index-DuMAhUlO.js";import{u as wa,V as Sa,X as Na}from"./XpPopup-DvTFvK-G.js";import{T as Ca}from"./trash-2-CThAXJrU.js";import{L as ka}from"./LanguageSelector-CqqKwcb1.js";import"./chevron-down-dSV5BqrI.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _a=X("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aa=X("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=X("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pa=X("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ea=X("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ra=X("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ta=X("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=X("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Da=X("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),za=({value:t,onChange:a,placeholder:r="Kategoriya tanlang"})=>{var l,c;const{categories:n,isLoading:s}=ia();return s?e.jsx("div",{className:"h-10 bg-muted rounded-lg animate-pulse"}):e.jsxs(aa,{value:t||"none",onValueChange:i=>a(i==="none"?null:i),children:[e.jsx(ra,{className:"w-full",children:e.jsx(sa,{placeholder:r,children:t?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:(l=n.find(i=>i.id===t))==null?void 0:l.icon}),e.jsx("span",{children:(c=n.find(i=>i.id===t))==null?void 0:c.name})]}):e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(De,{className:"w-4 h-4"}),e.jsx("span",{children:r})]})})}),e.jsxs(oa,{children:[e.jsx(Te,{value:"none",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(De,{className:"w-4 h-4"}),e.jsx("span",{children:"Kategoriyasiz"})]})}),n.map(i=>e.jsx(Te,{value:i.id,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:i.icon}),e.jsx("span",{children:i.name})]})},i.id))]})]})},Le={uz:"üá∫üáø",ru:"üá∑üá∫",en:"üá¨üáß"},ue={uz:{uz:"O'zbekcha",ru:"–£–∑–±–µ–∫—Å–∫–∏–π",en:"Uzbek"},ru:{uz:"Ruscha",ru:"–†—É—Å—Å–∫–∏–π",en:"Russian"},en:{uz:"Inglizcha",ru:"–ê–Ω–≥–ª–∏–π—Å–∫–∏–π",en:"English"}},La=({sourceLanguage:t,targetLanguage:a,onAddWord:r})=>{const{t:n,language:s}=Se(),[l,c]=o.useState(""),[i,d]=o.useState(""),[h,u]=o.useState(""),[f,x]=o.useState(null),[g,y]=o.useState(!1),N=async w=>{if(w.preventDefault(),!l.trim()||!i.trim()){P.error("Iltimos, barcha maydonlarni to'ldiring");return}y(!0);try{const p=h.split(`
`).map(v=>v.trim()).filter(v=>v.length>0);await r({originalWord:l.trim(),translatedWord:i.trim(),sourceLanguage:t,targetLanguage:a,exampleSentences:p,categoryId:f}),c(""),d(""),u(""),P.success(n("wordAdded"))}catch{P.error("Xatolik yuz berdi")}finally{y(!1)}};return e.jsxs(L.form,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},onSubmit:N,className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 p-4 bg-muted rounded-xl",children:[e.jsx("span",{className:"text-2xl",children:Le[t]}),e.jsx("span",{className:"font-medium",children:ue[t][s]}),e.jsx("span",{className:"text-muted-foreground",children:"‚Üí"}),e.jsx("span",{className:"text-2xl",children:Le[a]}),e.jsx("span",{className:"font-medium",children:ue[a][s]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(ie,{htmlFor:"originalWord",className:"text-sm font-medium",children:[n("enterWord")," (",ue[t][s],")"]}),e.jsxs("div",{className:"relative",children:[e.jsx(te,{id:"originalWord",value:l,onChange:w=>c(w.target.value),placeholder:t==="en"?"Hello":t==="ru"?"–ü—Ä–∏–≤–µ—Ç":"Salom",className:"bg-background text-lg h-12"}),e.jsx(Ft,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(ie,{htmlFor:"translatedWord",className:"text-sm font-medium",children:[n("translation")," (",ue[a][s],")"]}),e.jsx(te,{id:"translatedWord",value:i,onChange:w=>d(w.target.value),placeholder:a==="uz"?"Salom":a==="ru"?"–ü—Ä–∏–≤–µ—Ç":"Hello",className:"bg-background text-lg h-12"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ie,{className:"text-sm font-medium",children:"Kategoriya (ixtiyoriy)"}),e.jsx(za,{value:f,onChange:x})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(ie,{htmlFor:"examples",className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(Be,{className:"w-4 h-4 text-accent"}),n("examples")," (ixtiyoriy)"]}),e.jsx(na,{id:"examples",value:h,onChange:w=>u(w.target.value),placeholder:"Har bir misolni yangi qatorga yozing...",className:"bg-background min-h-[100px]"})]}),e.jsxs(O,{type:"submit",size:"lg",disabled:g,className:"w-full gap-2 gradient-primary text-primary-foreground h-12",children:[e.jsx(Ht,{className:"w-5 h-5"}),g?"Qo'shilmoqda...":n("add")]})]})},Ia=({sourceLanguage:t,targetLanguage:a,onImport:r})=>{const{language:n}=Se(),s=o.useRef(null),[l,c]=o.useState(!1),[i,d]=o.useState(!1),[h,u]=o.useState(0),[f,x]=o.useState(0),[g,y]=o.useState([]),[N,w]=o.useState(""),[p,v]=o.useState(""),S={uz:{uz:"O'zbekcha",ru:"–£–∑–±–µ–∫—Å–∫–∏–π",en:"Uzbek"},ru:{uz:"Ruscha",ru:"–†—É—Å—Å–∫–∏–π",en:"Russian"},en:{uz:"Inglizcha",ru:"–ê–Ω–≥–ª–∏–π—Å–∫–∏–π",en:"English"}},A=async C=>{var b;const j=(b=C.target.files)==null?void 0:b[0];if(!j)return;if(!["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel","text/csv"].includes(j.type)&&!j.name.endsWith(".csv")&&!j.name.endsWith(".xlsx")&&!j.name.endsWith(".xls")){v("Faqat Excel (.xlsx, .xls) yoki CSV fayllar qabul qilinadi");return}if(j.size>5*1024*1024){v("Fayl hajmi 5MB dan oshmasligi kerak");return}v(""),w(j.name),c(!0),u(10);try{const T=await ye(()=>import("./xlsx-B6sNpj_1.js"),[]),ne=await j.arrayBuffer();u(30);const V=T.read(ne);u(50);const R=V.Sheets[V.SheetNames[0]],q=T.utils.sheet_to_json(R,{header:1});u(70);const K=[],Z=q.length>0&&typeof q[0][0]=="string"&&(q[0][0].toLowerCase().includes("word")||q[0][0].toLowerCase().includes("so'z")||q[0][0].toLowerCase().includes("—Å–ª–æ–≤–æ"))?1:0;for(let D=Z;D<q.length;D++){const k=q[D];if(k&&k[0]&&k[1]){const Y=String(k[0]).trim(),z=String(k[1]).trim();if(Y.length>100||z.length>100)continue;Y&&z&&K.push({originalWord:Y,translatedWord:z,examples:k[2]?String(k[2]).trim():void 0})}}u(100),K.length===0?(v("Faylda so'zlar topilmadi. Ustunlar: A - asl so'z, B - tarjima, C - misollar (ixtiyoriy)"),y([])):K.length>1e3?(v("Maksimum 1000 ta so'z import qilish mumkin. Faylda "+K.length+" ta so'z bor."),y(K.slice(0,1e3))):y(K)}catch(T){console.error("Error parsing file:",T),v("Faylni o'qishda xatolik yuz berdi")}finally{c(!1)}},E=async()=>{if(g.length!==0){d(!0),x(0);try{const C=g.map(m=>({originalWord:m.originalWord,translatedWord:m.translatedWord,exampleSentences:m.examples?m.examples.split(";").map(b=>b.trim()).filter(b=>b.length>0):[]})),j=setInterval(()=>{x(m=>m>=90?(clearInterval(j),m):m+10)},100);await r(C),clearInterval(j),x(100),P.success(`${C.length} ta so'z muvaffaqiyatli import qilindi!`),setTimeout(()=>{y([]),w(""),x(0),d(!1),s.current&&(s.current.value="")},500)}catch{P.error("Import qilishda xatolik yuz berdi"),d(!1),x(0)}}},_=()=>{y([]),w(""),v(""),u(0),s.current&&(s.current.value="")},M=async()=>{const C=await ye(()=>import("./xlsx-B6sNpj_1.js"),[]),j=[[S[t][n],S[a][n],"Misollar (ixtiyoriy)"],["Hello","Salom","Hello, how are you?; Hello world"],["Book","Kitob","I read a book"]],m=C.utils.aoa_to_sheet(j),b=C.utils.book_new();C.utils.book_append_sheet(b,m,"Words"),C.writeFile(b,"leitner_template.xlsx")};return e.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4",children:[e.jsxs("button",{onClick:M,className:"flex items-center gap-2 text-sm text-primary hover:underline",children:[e.jsx(Aa,{className:"w-4 h-4"}),"Namuna faylni yuklab olish"]}),e.jsx("input",{ref:s,type:"file",accept:".xlsx,.xls,.csv",onChange:A,className:"hidden"}),N?e.jsxs("div",{className:"bg-muted/50 rounded-2xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Xe,{className:"w-8 h-8 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:N}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[g.length," ta so'z topildi"]})]})]}),e.jsx("button",{onClick:_,className:"p-2 hover:bg-destructive/10 rounded-lg transition-colors",children:e.jsx(Me,{className:"w-4 h-4 text-destructive"})})]}),l&&e.jsx(we,{value:h,className:"h-2"})]}):e.jsxs("div",{onClick:()=>{var C;return(C=s.current)==null?void 0:C.click()},className:"border-2 border-dashed border-muted-foreground/30 rounded-2xl p-8 text-center cursor-pointer hover:border-primary/50 hover:bg-primary/5 transition-all",children:[e.jsx(Da,{className:"w-10 h-10 mx-auto mb-3 text-muted-foreground"}),e.jsx("p",{className:"font-medium text-foreground mb-1",children:"Faylni tanlang yoki bu yerga tashlang"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Excel (.xlsx, .xls) yoki CSV fayl"})]}),e.jsx(me,{children:p&&e.jsxs(L.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"flex items-center gap-2 p-3 bg-destructive/10 text-destructive rounded-xl text-sm",children:[e.jsx(_a,{className:"w-4 h-4 flex-shrink-0"}),p]})}),e.jsx(me,{children:g.length>0&&e.jsxs(L.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-3",children:[e.jsx("h4",{className:"font-medium text-sm",children:"Ko'rib chiqish (birinchi 10 ta):"}),e.jsxs("div",{className:"max-h-60 overflow-y-auto space-y-2 pr-2",children:[g.slice(0,10).map((C,j)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-background rounded-xl text-sm",children:[e.jsx("span",{className:"font-medium",children:C.originalWord}),e.jsx("span",{className:"text-muted-foreground",children:"‚Üí"}),e.jsx("span",{className:"text-primary",children:C.translatedWord})]},j)),g.length>10&&e.jsxs("p",{className:"text-center text-sm text-muted-foreground py-2",children:["... va yana ",g.length-10," ta so'z"]})]}),i&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Import qilinmoqda..."}),e.jsxs("span",{className:"font-medium text-primary",children:[f,"%"]})]}),e.jsx(we,{value:f,className:"h-3"})]}),e.jsxs(O,{onClick:E,disabled:i,className:"w-full gap-2 gradient-primary text-primary-foreground",children:[e.jsx(Ne,{className:"w-4 h-4"}),i?`Import qilinmoqda... ${f}%`:`${g.length} ta so'zni import qilish`]})]})})]})};var xe="Checkbox",[Wa,zr]=Ce(xe),[Ma,ke]=Wa(xe);function qa(t){const{__scopeCheckbox:a,checked:r,children:n,defaultChecked:s,disabled:l,form:c,name:i,onCheckedChange:d,required:h,value:u="on",internal_do_not_use_render:f}=t,[x,g]=$t({prop:r,defaultProp:s??!1,onChange:d,caller:xe}),[y,N]=o.useState(null),[w,p]=o.useState(null),v=o.useRef(!1),S=y?!!c||!!y.closest("form"):!0,A={checked:x,disabled:l,setChecked:g,control:y,setControl:N,name:i,form:c,value:u,hasConsumerStoppedPropagationRef:v,required:h,defaultChecked:U(s)?!1:s,isFormControl:S,bubbleInput:w,setBubbleInput:p};return e.jsx(Ma,{scope:a,...A,children:Oa(f)?f(A):n})}var Ve="CheckboxTrigger",Ye=o.forwardRef(({__scopeCheckbox:t,onKeyDown:a,onClick:r,...n},s)=>{const{control:l,value:c,disabled:i,checked:d,required:h,setControl:u,setChecked:f,hasConsumerStoppedPropagationRef:x,isFormControl:g,bubbleInput:y}=ke(Ve,t),N=F(s,u),w=o.useRef(d);return o.useEffect(()=>{const p=l==null?void 0:l.form;if(p){const v=()=>f(w.current);return p.addEventListener("reset",v),()=>p.removeEventListener("reset",v)}},[l,f]),e.jsx(G.button,{type:"button",role:"checkbox","aria-checked":U(d)?"mixed":d,"aria-required":h,"data-state":Je(d),"data-disabled":i?"":void 0,disabled:i,value:c,...n,ref:N,onKeyDown:B(a,p=>{p.key==="Enter"&&p.preventDefault()}),onClick:B(r,p=>{f(v=>U(v)?!0:!v),y&&g&&(x.current=p.isPropagationStopped(),x.current||p.stopPropagation())})})});Ye.displayName=Ve;var _e=o.forwardRef((t,a)=>{const{__scopeCheckbox:r,name:n,checked:s,defaultChecked:l,required:c,disabled:i,value:d,onCheckedChange:h,form:u,...f}=t;return e.jsx(qa,{__scopeCheckbox:r,checked:s,defaultChecked:l,disabled:i,required:c,onCheckedChange:h,name:n,form:u,value:d,internal_do_not_use_render:({isFormControl:x})=>e.jsxs(e.Fragment,{children:[e.jsx(Ye,{...f,ref:a,__scopeCheckbox:r}),x&&e.jsx(Qe,{__scopeCheckbox:r})]})})});_e.displayName=xe;var Ue="CheckboxIndicator",Ge=o.forwardRef((t,a)=>{const{__scopeCheckbox:r,forceMount:n,...s}=t,l=ke(Ue,r);return e.jsx(oe,{present:n||U(l.checked)||l.checked===!0,children:e.jsx(G.span,{"data-state":Je(l.checked),"data-disabled":l.disabled?"":void 0,...s,ref:a,style:{pointerEvents:"none",...t.style}})})});Ge.displayName=Ue;var Ke="CheckboxBubbleInput",Qe=o.forwardRef(({__scopeCheckbox:t,...a},r)=>{const{control:n,hasConsumerStoppedPropagationRef:s,checked:l,defaultChecked:c,required:i,disabled:d,name:h,value:u,form:f,bubbleInput:x,setBubbleInput:g}=ke(Ke,t),y=F(r,g),N=da(l),w=Xt(n);o.useEffect(()=>{const v=x;if(!v)return;const S=window.HTMLInputElement.prototype,E=Object.getOwnPropertyDescriptor(S,"checked").set,_=!s.current;if(N!==l&&E){const M=new Event("click",{bubbles:_});v.indeterminate=U(l),E.call(v,U(l)?!1:l),v.dispatchEvent(M)}},[x,N,l,s]);const p=o.useRef(U(l)?!1:l);return e.jsx(G.input,{type:"checkbox","aria-hidden":!0,defaultChecked:c??p.current,required:i,disabled:d,name:h,value:u,form:f,...a,tabIndex:-1,ref:y,style:{...a.style,...w,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});Qe.displayName=Ke;function Oa(t){return typeof t=="function"}function U(t){return t==="indeterminate"}function Je(t){return U(t)?"indeterminate":t?"checked":"unchecked"}const Ze=o.forwardRef(({className:t,...a},r)=>e.jsx(_e,{ref:r,className:I("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...a,children:e.jsx(Ge,{className:I("flex items-center justify-center text-current"),children:e.jsx(Ne,{className:"h-4 w-4"})})}));Ze.displayName=_e.displayName;function Ba(t,a){return o.useReducer((r,n)=>a[r][n]??r,t)}var Ae="ScrollArea",[et,Lr]=Ce(Ae),[Fa,W]=et(Ae),tt=o.forwardRef((t,a)=>{const{__scopeScrollArea:r,type:n="hover",dir:s,scrollHideDelay:l=600,...c}=t,[i,d]=o.useState(null),[h,u]=o.useState(null),[f,x]=o.useState(null),[g,y]=o.useState(null),[N,w]=o.useState(null),[p,v]=o.useState(0),[S,A]=o.useState(0),[E,_]=o.useState(!1),[M,C]=o.useState(!1),j=F(a,b=>d(b)),m=Vt(s);return e.jsx(Fa,{scope:r,type:n,dir:m,scrollHideDelay:l,scrollArea:i,viewport:h,onViewportChange:u,content:f,onContentChange:x,scrollbarX:g,onScrollbarXChange:y,scrollbarXEnabled:E,onScrollbarXEnabledChange:_,scrollbarY:N,onScrollbarYChange:w,scrollbarYEnabled:M,onScrollbarYEnabledChange:C,onCornerWidthChange:v,onCornerHeightChange:A,children:e.jsx(G.div,{dir:m,...c,ref:j,style:{position:"relative","--radix-scroll-area-corner-width":p+"px","--radix-scroll-area-corner-height":S+"px",...t.style}})})});tt.displayName=Ae;var at="ScrollAreaViewport",rt=o.forwardRef((t,a)=>{const{__scopeScrollArea:r,children:n,nonce:s,...l}=t,c=W(at,r),i=o.useRef(null),d=F(a,i,c.onViewportChange);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),e.jsx(G.div,{"data-radix-scroll-area-viewport":"",...l,ref:d,style:{overflowX:c.scrollbarXEnabled?"scroll":"hidden",overflowY:c.scrollbarYEnabled?"scroll":"hidden",...t.style},children:e.jsx("div",{ref:c.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});rt.displayName=at;var H="ScrollAreaScrollbar",Pe=o.forwardRef((t,a)=>{const{forceMount:r,...n}=t,s=W(H,t.__scopeScrollArea),{onScrollbarXEnabledChange:l,onScrollbarYEnabledChange:c}=s,i=t.orientation==="horizontal";return o.useEffect(()=>(i?l(!0):c(!0),()=>{i?l(!1):c(!1)}),[i,l,c]),s.type==="hover"?e.jsx(Ha,{...n,ref:a,forceMount:r}):s.type==="scroll"?e.jsx(Xa,{...n,ref:a,forceMount:r}):s.type==="auto"?e.jsx(st,{...n,ref:a,forceMount:r}):s.type==="always"?e.jsx(Ee,{...n,ref:a}):null});Pe.displayName=H;var Ha=o.forwardRef((t,a)=>{const{forceMount:r,...n}=t,s=W(H,t.__scopeScrollArea),[l,c]=o.useState(!1);return o.useEffect(()=>{const i=s.scrollArea;let d=0;if(i){const h=()=>{window.clearTimeout(d),c(!0)},u=()=>{d=window.setTimeout(()=>c(!1),s.scrollHideDelay)};return i.addEventListener("pointerenter",h),i.addEventListener("pointerleave",u),()=>{window.clearTimeout(d),i.removeEventListener("pointerenter",h),i.removeEventListener("pointerleave",u)}}},[s.scrollArea,s.scrollHideDelay]),e.jsx(oe,{present:r||l,children:e.jsx(st,{"data-state":l?"visible":"hidden",...n,ref:a})})}),Xa=o.forwardRef((t,a)=>{const{forceMount:r,...n}=t,s=W(H,t.__scopeScrollArea),l=t.orientation==="horizontal",c=ge(()=>d("SCROLL_END"),100),[i,d]=Ba("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return o.useEffect(()=>{if(i==="idle"){const h=window.setTimeout(()=>d("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(h)}},[i,s.scrollHideDelay,d]),o.useEffect(()=>{const h=s.viewport,u=l?"scrollLeft":"scrollTop";if(h){let f=h[u];const x=()=>{const g=h[u];f!==g&&(d("SCROLL"),c()),f=g};return h.addEventListener("scroll",x),()=>h.removeEventListener("scroll",x)}},[s.viewport,l,d,c]),e.jsx(oe,{present:r||i!=="hidden",children:e.jsx(Ee,{"data-state":i==="hidden"?"hidden":"visible",...n,ref:a,onPointerEnter:B(t.onPointerEnter,()=>d("POINTER_ENTER")),onPointerLeave:B(t.onPointerLeave,()=>d("POINTER_LEAVE"))})})}),st=o.forwardRef((t,a)=>{const r=W(H,t.__scopeScrollArea),{forceMount:n,...s}=t,[l,c]=o.useState(!1),i=t.orientation==="horizontal",d=ge(()=>{if(r.viewport){const h=r.viewport.offsetWidth<r.viewport.scrollWidth,u=r.viewport.offsetHeight<r.viewport.scrollHeight;c(i?h:u)}},10);return re(r.viewport,d),re(r.content,d),e.jsx(oe,{present:n||l,children:e.jsx(Ee,{"data-state":l?"visible":"hidden",...s,ref:a})})}),Ee=o.forwardRef((t,a)=>{const{orientation:r="vertical",...n}=t,s=W(H,t.__scopeScrollArea),l=o.useRef(null),c=o.useRef(0),[i,d]=o.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),h=ct(i.viewport,i.content),u={...n,sizes:i,onSizesChange:d,hasThumb:h>0&&h<1,onThumbChange:x=>l.current=x,onThumbPointerUp:()=>c.current=0,onThumbPointerDown:x=>c.current=x};function f(x,g){return Ka(x,c.current,i,g)}return r==="horizontal"?e.jsx($a,{...u,ref:a,onThumbPositionChange:()=>{if(s.viewport&&l.current){const x=s.viewport.scrollLeft,g=Ie(x,i,s.dir);l.current.style.transform=`translate3d(${g}px, 0, 0)`}},onWheelScroll:x=>{s.viewport&&(s.viewport.scrollLeft=x)},onDragScroll:x=>{s.viewport&&(s.viewport.scrollLeft=f(x,s.dir))}}):r==="vertical"?e.jsx(Va,{...u,ref:a,onThumbPositionChange:()=>{if(s.viewport&&l.current){const x=s.viewport.scrollTop,g=Ie(x,i);l.current.style.transform=`translate3d(0, ${g}px, 0)`}},onWheelScroll:x=>{s.viewport&&(s.viewport.scrollTop=x)},onDragScroll:x=>{s.viewport&&(s.viewport.scrollTop=f(x))}}):null}),$a=o.forwardRef((t,a)=>{const{sizes:r,onSizesChange:n,...s}=t,l=W(H,t.__scopeScrollArea),[c,i]=o.useState(),d=o.useRef(null),h=F(a,d,l.onScrollbarXChange);return o.useEffect(()=>{d.current&&i(getComputedStyle(d.current))},[d]),e.jsx(nt,{"data-orientation":"horizontal",...s,ref:h,sizes:r,style:{bottom:0,left:l.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:l.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":fe(r)+"px",...t.style},onThumbPointerDown:u=>t.onThumbPointerDown(u.x),onDragScroll:u=>t.onDragScroll(u.x),onWheelScroll:(u,f)=>{if(l.viewport){const x=l.viewport.scrollLeft+u.deltaX;t.onWheelScroll(x),ut(x,f)&&u.preventDefault()}},onResize:()=>{d.current&&l.viewport&&c&&n({content:l.viewport.scrollWidth,viewport:l.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:pe(c.paddingLeft),paddingEnd:pe(c.paddingRight)}})}})}),Va=o.forwardRef((t,a)=>{const{sizes:r,onSizesChange:n,...s}=t,l=W(H,t.__scopeScrollArea),[c,i]=o.useState(),d=o.useRef(null),h=F(a,d,l.onScrollbarYChange);return o.useEffect(()=>{d.current&&i(getComputedStyle(d.current))},[d]),e.jsx(nt,{"data-orientation":"vertical",...s,ref:h,sizes:r,style:{top:0,right:l.dir==="ltr"?0:void 0,left:l.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":fe(r)+"px",...t.style},onThumbPointerDown:u=>t.onThumbPointerDown(u.y),onDragScroll:u=>t.onDragScroll(u.y),onWheelScroll:(u,f)=>{if(l.viewport){const x=l.viewport.scrollTop+u.deltaY;t.onWheelScroll(x),ut(x,f)&&u.preventDefault()}},onResize:()=>{d.current&&l.viewport&&c&&n({content:l.viewport.scrollHeight,viewport:l.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:pe(c.paddingTop),paddingEnd:pe(c.paddingBottom)}})}})}),[Ya,ot]=et(H),nt=o.forwardRef((t,a)=>{const{__scopeScrollArea:r,sizes:n,hasThumb:s,onThumbChange:l,onThumbPointerUp:c,onThumbPointerDown:i,onThumbPositionChange:d,onDragScroll:h,onWheelScroll:u,onResize:f,...x}=t,g=W(H,r),[y,N]=o.useState(null),w=F(a,j=>N(j)),p=o.useRef(null),v=o.useRef(""),S=g.viewport,A=n.content-n.viewport,E=J(u),_=J(d),M=ge(f,10);function C(j){if(p.current){const m=j.clientX-p.current.left,b=j.clientY-p.current.top;h({x:m,y:b})}}return o.useEffect(()=>{const j=m=>{const b=m.target;(y==null?void 0:y.contains(b))&&E(m,A)};return document.addEventListener("wheel",j,{passive:!1}),()=>document.removeEventListener("wheel",j,{passive:!1})},[S,y,A,E]),o.useEffect(_,[n,_]),re(y,M),re(g.content,M),e.jsx(Ya,{scope:r,scrollbar:y,hasThumb:s,onThumbChange:J(l),onThumbPointerUp:J(c),onThumbPositionChange:_,onThumbPointerDown:J(i),children:e.jsx(G.div,{...x,ref:w,style:{position:"absolute",...x.style},onPointerDown:B(t.onPointerDown,j=>{j.button===0&&(j.target.setPointerCapture(j.pointerId),p.current=y.getBoundingClientRect(),v.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",g.viewport&&(g.viewport.style.scrollBehavior="auto"),C(j))}),onPointerMove:B(t.onPointerMove,C),onPointerUp:B(t.onPointerUp,j=>{const m=j.target;m.hasPointerCapture(j.pointerId)&&m.releasePointerCapture(j.pointerId),document.body.style.webkitUserSelect=v.current,g.viewport&&(g.viewport.style.scrollBehavior=""),p.current=null})})})}),he="ScrollAreaThumb",lt=o.forwardRef((t,a)=>{const{forceMount:r,...n}=t,s=ot(he,t.__scopeScrollArea);return e.jsx(oe,{present:r||s.hasThumb,children:e.jsx(Ua,{ref:a,...n})})}),Ua=o.forwardRef((t,a)=>{const{__scopeScrollArea:r,style:n,...s}=t,l=W(he,r),c=ot(he,r),{onThumbPositionChange:i}=c,d=F(a,f=>c.onThumbChange(f)),h=o.useRef(void 0),u=ge(()=>{h.current&&(h.current(),h.current=void 0)},100);return o.useEffect(()=>{const f=l.viewport;if(f){const x=()=>{if(u(),!h.current){const g=Qa(f,i);h.current=g,i()}};return i(),f.addEventListener("scroll",x),()=>f.removeEventListener("scroll",x)}},[l.viewport,u,i]),e.jsx(G.div,{"data-state":c.hasThumb?"visible":"hidden",...s,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:B(t.onPointerDownCapture,f=>{const g=f.target.getBoundingClientRect(),y=f.clientX-g.left,N=f.clientY-g.top;c.onThumbPointerDown({x:y,y:N})}),onPointerUp:B(t.onPointerUp,c.onThumbPointerUp)})});lt.displayName=he;var Re="ScrollAreaCorner",it=o.forwardRef((t,a)=>{const r=W(Re,t.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?e.jsx(Ga,{...t,ref:a}):null});it.displayName=Re;var Ga=o.forwardRef((t,a)=>{const{__scopeScrollArea:r,...n}=t,s=W(Re,r),[l,c]=o.useState(0),[i,d]=o.useState(0),h=!!(l&&i);return re(s.scrollbarX,()=>{var f;const u=((f=s.scrollbarX)==null?void 0:f.offsetHeight)||0;s.onCornerHeightChange(u),d(u)}),re(s.scrollbarY,()=>{var f;const u=((f=s.scrollbarY)==null?void 0:f.offsetWidth)||0;s.onCornerWidthChange(u),c(u)}),h?e.jsx(G.div,{...n,ref:a,style:{width:l,height:i,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function pe(t){return t?parseInt(t,10):0}function ct(t,a){const r=t/a;return isNaN(r)?0:r}function fe(t){const a=ct(t.viewport,t.content),r=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,n=(t.scrollbar.size-r)*a;return Math.max(n,18)}function Ka(t,a,r,n="ltr"){const s=fe(r),l=s/2,c=a||l,i=s-c,d=r.scrollbar.paddingStart+c,h=r.scrollbar.size-r.scrollbar.paddingEnd-i,u=r.content-r.viewport,f=n==="ltr"?[0,u]:[u*-1,0];return dt([d,h],f)(t)}function Ie(t,a,r="ltr"){const n=fe(a),s=a.scrollbar.paddingStart+a.scrollbar.paddingEnd,l=a.scrollbar.size-s,c=a.content-a.viewport,i=l-n,d=r==="ltr"?[0,c]:[c*-1,0],h=la(t,d);return dt([0,c],[0,i])(h)}function dt(t,a){return r=>{if(t[0]===t[1]||a[0]===a[1])return a[0];const n=(a[1]-a[0])/(t[1]-t[0]);return a[0]+n*(r-t[0])}}function ut(t,a){return t>0&&t<a}var Qa=(t,a=()=>{})=>{let r={left:t.scrollLeft,top:t.scrollTop},n=0;return function s(){const l={left:t.scrollLeft,top:t.scrollTop},c=r.left!==l.left,i=r.top!==l.top;(c||i)&&a(),r=l,n=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(n)};function ge(t,a){const r=J(t),n=o.useRef(0);return o.useEffect(()=>()=>window.clearTimeout(n.current),[]),o.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,a)},[r,a])}function re(t,a){const r=J(a);Yt(()=>{let n=0;if(t){const s=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return s.observe(t),()=>{window.cancelAnimationFrame(n),s.unobserve(t)}}},[t,r])}var mt=tt,Ja=rt,Za=it;const ht=o.forwardRef(({className:t,children:a,...r},n)=>e.jsxs(mt,{ref:n,className:I("relative overflow-hidden",t),...r,children:[e.jsx(Ja,{className:"h-full w-full rounded-[inherit]",children:a}),e.jsx(pt,{}),e.jsx(Za,{})]}));ht.displayName=mt.displayName;const pt=o.forwardRef(({className:t,orientation:a="vertical",...r},n)=>e.jsx(Pe,{ref:n,orientation:a,className:I("flex touch-none select-none transition-colors",a==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",a==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...r,children:e.jsx(lt,{className:"relative flex-1 rounded-full bg-border"})}));pt.displayName=Pe.displayName;const ee=["A1","A2","B1","B2","C1","C2"],We={A1:"bg-green-500",A2:"bg-green-600",B1:"bg-yellow-500",B2:"bg-orange-500",C1:"bg-red-500",C2:"bg-purple-500"},er=({onImport:t,targetLanguage:a})=>{const[r,n]=o.useState([]),[s,l]=o.useState([]),[c,i]=o.useState(new Set),[d,h]=o.useState(""),[u,f]=o.useState(null),[x,g]=o.useState(!0),[y,N]=o.useState(!1),[w,p]=o.useState(0),S={en:{file:"/data/english-words.xlsx",name:"EnglishProfile",available:!0},ru:{file:"/data/russian-words.xlsx",name:"–†—É—Å—Å–∫–∏–π —Å–ª–æ–≤–∞—Ä—å",available:!1}}[a]||{file:"",name:"",available:!1};o.useEffect(()=>{if(!S.available){g(!1);return}(async()=>{try{const b=await ye(()=>import("./xlsx-B6sNpj_1.js"),[]),ne=await(await fetch(S.file)).arrayBuffer(),V=b.read(ne,{type:"array"}),R=[],q=V.Sheets["A1-C2"];q&&b.utils.sheet_to_json(q).forEach(k=>{const Y=k["Base Word"]||k.Word||k.__EMPTY,z=k.Level||k.__EMPTY_1||k.__EMPTY_2,Q=typeof Y=="string"?Y.trim():String(Y||"").trim(),se=typeof z=="string"?z.toUpperCase().trim():"";Q&&Q.length>0&&ee.includes(se)&&R.push({headword:Q,pos:"",level:se,guideword:void 0,topic:void 0})}),["A1+","A2+","B1+","B2+","C1+"].forEach(D=>{const k=V.Sheets[D];k&&b.utils.sheet_to_json(k).forEach(z=>{const Q=z["Base Word"]||z.__EMPTY||Object.values(z)[0],se=z.Level||z.__EMPTY_2||z.__EMPTY_1,ve=typeof Q=="string"?Q.trim():String(Q||"").trim();let le=typeof se=="string"?se.toUpperCase().trim():"";ee.includes(le)||(le=D.replace("+","")),ve&&ve.length>0&&ee.includes(le)&&R.push({headword:ve,pos:"",level:le,guideword:void 0,topic:void 0})})}),console.log("Total words parsed:",R.length);const Z=Array.from(new Map(R.map(D=>[D.headword.toLowerCase(),D])).values());console.log("Unique words:",Z.length),console.log("Level counts:",ee.map(D=>`${D}: ${Z.filter(k=>k.level===D).length}`)),n(Z),l(Z)}catch(b){console.error("Failed to load dictionary:",b),P.error("Lug'at yuklanmadi")}finally{g(!1)}})()},[a,S.available,S.file]),o.useEffect(()=>{let m=r;d&&(m=m.filter(b=>b.headword.toLowerCase().includes(d.toLowerCase()))),u&&(m=m.filter(b=>b.level===u)),l(m)},[r,d,u]);const A=m=>{const b=new Set(c);b.has(m)?b.delete(m):b.add(m),i(b)},E=()=>{const m=new Set(c);s.forEach(b=>m.add(b.headword)),i(m)},_=()=>{i(new Set)},M=m=>{const b=new Set(c);r.filter(T=>T.level===m).forEach(T=>b.add(T.headword)),i(b),P.success(`${m} darajasidagi barcha so'zlar tanlandi`)},C=async()=>{if(c.size===0){P.error("Kamida bitta so'z tanlang");return}N(!0),p(0);try{const m=r.filter(R=>c.has(R.headword)).map(R=>R.headword);p(10),P.info(`${m.length} ta so'z tarjima qilinmoqda...`);const{data:b,error:T}=await Qt.functions.invoke("translate-words",{body:{words:m,targetLanguage:"uz"}});if(T)throw console.error("Translation error:",T),new Error("Tarjima qilishda xatolik");p(70);const V=b.translations.map(R=>({originalWord:R.original,translatedWord:R.translation,exampleSentences:R.examples||[]}));p(85),await t(V),p(100),P.success(`${V.length} ta so'z muvaffaqiyatli import qilindi!`),i(new Set)}catch(m){console.error("Import error:",m),P.error("Import qilishda xatolik yuz berdi")}finally{N(!1),p(0)}},j=m=>r.filter(b=>b.level===m).length;if(!S.available){const m={en:"Ingliz",ru:"Rus",uz:"O'zbek"};return e.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col items-center justify-center py-12 gap-4 text-center",children:[e.jsx("div",{className:"p-4 rounded-full bg-muted",children:e.jsx(je,{className:"w-8 h-8 text-muted-foreground"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-lg mb-2",children:[m[a]||a," tili lug'ati mavjud emas"]}),e.jsx("p",{className:"text-sm text-muted-foreground max-w-xs",children:"Hozircha faqat ingliz tili uchun EnglishProfile lug'ati mavjud. Rus tili lug'atini qo'shish uchun Excel faylini yuklashingiz mumkin."})]})]})}return x?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 gap-4",children:[e.jsx(ze,{className:"w-8 h-8 animate-spin text-primary"}),e.jsx("p",{className:"text-muted-foreground",children:"Lug'at yuklanmoqda..."})]}):e.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 rounded-xl bg-primary/10",children:e.jsx(je,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold",children:[S.name," Lug'ati"]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[r.length," ta so'z (A1-C2)"]})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:ee.map(m=>e.jsxs("button",{onClick:()=>f(u===m?null:m),className:`px-3 py-1.5 rounded-full text-xs font-medium transition-all ${u===m?`${We[m]} text-white`:"bg-muted hover:bg-muted/80"}`,children:[m," (",j(m),")"]},m))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx($e,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(te,{placeholder:"So'z qidirish...",value:d,onChange:m=>h(m.target.value),className:"pl-10"})]}),e.jsxs(Ut,{children:[e.jsx(Gt,{asChild:!0,children:e.jsx(O,{variant:"outline",size:"icon",children:e.jsx(Pa,{className:"w-4 h-4"})})}),e.jsxs(Kt,{align:"end",children:[e.jsxs(be,{onClick:E,children:["Barchasini tanlash (",s.length,")"]}),e.jsx(be,{onClick:_,children:"Tanlovni bekor qilish"}),ee.map(m=>e.jsxs(be,{onClick:()=>M(m),children:[m," darajani tanlash"]},m))]})]})]}),e.jsx(ht,{className:"h-[300px] rounded-xl border",children:e.jsxs("div",{className:"p-2 space-y-1",children:[s.slice(0,200).map(m=>e.jsxs("div",{onClick:()=>A(m.headword),className:`flex items-center gap-3 p-2 rounded-lg cursor-pointer transition-colors ${c.has(m.headword)?"bg-primary/10 border border-primary/20":"hover:bg-muted"}`,children:[e.jsx(Ze,{checked:c.has(m.headword)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium truncate",children:m.headword}),m.pos&&e.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",m.pos,")"]})]}),m.guideword&&e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:m.guideword})]}),e.jsx(ca,{className:`${We[m.level]} text-white text-xs`,children:m.level})]},m.headword)),s.length>200&&e.jsxs("p",{className:"text-center text-sm text-muted-foreground py-4",children:["...va yana ",s.length-200," ta so'z"]})]})}),e.jsx(me,{children:y&&e.jsxs(L.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Import qilinmoqda..."}),e.jsxs("span",{className:"font-medium text-primary",children:[w,"%"]})]}),e.jsx(we,{value:w,className:"h-2"})]})}),e.jsx(O,{onClick:C,disabled:c.size===0||y,className:"w-full gap-2 gradient-primary text-primary-foreground",children:y?e.jsxs(e.Fragment,{children:[e.jsx(ze,{className:"w-4 h-4 animate-spin"}),`ChatGPT tarjima qilmoqda... ${w}%`]}):e.jsxs(e.Fragment,{children:[e.jsx(Be,{className:"w-4 h-4"}),`${c.size} ta so'zni tarjima qilish (ChatGPT)`]})}),e.jsx("p",{className:"text-xs text-center text-muted-foreground",children:"ChatGPT orqali avtomatik tarjima va misol gaplar"})]})};var xt="AlertDialog",[tr,Ir]=Ce(xt,[Fe]),$=Fe(),ft=t=>{const{__scopeAlertDialog:a,...r}=t,n=$(a);return e.jsx(ja,{...n,...r,modal:!0})};ft.displayName=xt;var ar="AlertDialogTrigger",gt=o.forwardRef((t,a)=>{const{__scopeAlertDialog:r,...n}=t,s=$(r);return e.jsx(pa,{...s,...n,ref:a})});gt.displayName=ar;var rr="AlertDialogPortal",vt=t=>{const{__scopeAlertDialog:a,...r}=t,n=$(a);return e.jsx(ya,{...n,...r})};vt.displayName=rr;var sr="AlertDialogOverlay",bt=o.forwardRef((t,a)=>{const{__scopeAlertDialog:r,...n}=t,s=$(r);return e.jsx(xa,{...s,...n,ref:a})});bt.displayName=sr;var ae="AlertDialogContent",[or,nr]=tr(ae),lr=Jt("AlertDialogContent"),yt=o.forwardRef((t,a)=>{const{__scopeAlertDialog:r,children:n,...s}=t,l=$(r),c=o.useRef(null),i=F(a,c),d=o.useRef(null);return e.jsx(fa,{contentName:ae,titleName:jt,docsSlug:"alert-dialog",children:e.jsx(or,{scope:r,cancelRef:d,children:e.jsxs(ga,{role:"alertdialog",...l,...s,ref:i,onOpenAutoFocus:B(s.onOpenAutoFocus,h=>{var u;h.preventDefault(),(u=d.current)==null||u.focus({preventScroll:!0})}),onPointerDownOutside:h=>h.preventDefault(),onInteractOutside:h=>h.preventDefault(),children:[e.jsx(lr,{children:n}),e.jsx(cr,{contentRef:c})]})})})});yt.displayName=ae;var jt="AlertDialogTitle",wt=o.forwardRef((t,a)=>{const{__scopeAlertDialog:r,...n}=t,s=$(r);return e.jsx(va,{...s,...n,ref:a})});wt.displayName=jt;var St="AlertDialogDescription",Nt=o.forwardRef((t,a)=>{const{__scopeAlertDialog:r,...n}=t,s=$(r);return e.jsx(ba,{...s,...n,ref:a})});Nt.displayName=St;var ir="AlertDialogAction",Ct=o.forwardRef((t,a)=>{const{__scopeAlertDialog:r,...n}=t,s=$(r);return e.jsx(He,{...s,...n,ref:a})});Ct.displayName=ir;var kt="AlertDialogCancel",_t=o.forwardRef((t,a)=>{const{__scopeAlertDialog:r,...n}=t,{cancelRef:s}=nr(kt,r),l=$(r),c=F(a,s);return e.jsx(He,{...l,...n,ref:c})});_t.displayName=kt;var cr=({contentRef:t})=>{const a=`\`${ae}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${ae}\` by passing a \`${St}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${ae}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return o.useEffect(()=>{var n;document.getElementById((n=t.current)==null?void 0:n.getAttribute("aria-describedby"))||console.warn(a)},[a,t]),null},dr=ft,ur=gt,mr=vt,At=bt,Pt=yt,Et=Ct,Rt=_t,Tt=wt,Dt=Nt;const hr=dr,pr=ur,xr=mr,zt=o.forwardRef(({className:t,...a},r)=>e.jsx(At,{className:I("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...a,ref:r}));zt.displayName=At.displayName;const Lt=o.forwardRef(({className:t,...a},r)=>e.jsxs(xr,{children:[e.jsx(zt,{}),e.jsx(Pt,{ref:r,className:I("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...a})]}));Lt.displayName=Pt.displayName;const It=({className:t,...a})=>e.jsx("div",{className:I("flex flex-col space-y-2 text-center sm:text-left",t),...a});It.displayName="AlertDialogHeader";const Wt=({className:t,...a})=>e.jsx("div",{className:I("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a});Wt.displayName="AlertDialogFooter";const Mt=o.forwardRef(({className:t,...a},r)=>e.jsx(Tt,{ref:r,className:I("text-lg font-semibold",t),...a}));Mt.displayName=Tt.displayName;const qt=o.forwardRef(({className:t,...a},r)=>e.jsx(Dt,{ref:r,className:I("text-sm text-muted-foreground",t),...a}));qt.displayName=Dt.displayName;const Ot=o.forwardRef(({className:t,...a},r)=>e.jsx(Et,{ref:r,className:I(qe(),t),...a}));Ot.displayName=Et.displayName;const Bt=o.forwardRef(({className:t,...a},r)=>e.jsx(Rt,{ref:r,className:I(qe({variant:"outline"}),"mt-2 sm:mt-0",t),...a}));Bt.displayName=Rt.displayName;const fr=()=>{const{words:t,updateWord:a,deleteWord:r,isLoading:n}=Oe(),{speak:s,isSpeaking:l}=wa(),[c,i]=o.useState(null),[d,h]=o.useState({original:"",translated:""}),[u,f]=o.useState(""),x=t.filter(p=>p.original_word.toLowerCase().includes(u.toLowerCase())||p.translated_word.toLowerCase().includes(u.toLowerCase())),g=p=>{i(p.id),h({original:p.original_word,translated:p.translated_word})},y=async p=>{if(!d.original.trim()||!d.translated.trim()){P.error("Bo'sh qoldirib bo'lmaydi");return}await a(p,{original_word:d.original.trim(),translated_word:d.translated.trim()})?(P.success("So'z yangilandi"),i(null)):P.error("Xatolik yuz berdi")},N=()=>{i(null),h({original:"",translated:""})},w=async p=>{await r(p),P.success("So'z o'chirildi")};return n?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-pulse text-muted-foreground",children:"Yuklanmoqda..."})}):t.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-muted-foreground",children:"Hali so'zlar yo'q"})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx($e,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(te,{placeholder:"So'z qidirish...",value:u,onChange:p=>f(p.target.value),className:"pl-10"})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Jami: ",x.length," ta so'z"]}),e.jsx("div",{className:"space-y-2 max-h-[60vh] overflow-y-auto pr-1",children:e.jsx(me,{mode:"popLayout",children:x.map(p=>e.jsx(L.div,{layout:!0,initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,x:-100},transition:{duration:.2},children:e.jsx(ua,{className:"p-3",children:c===p.id?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(te,{value:d.original,onChange:v=>h({...d,original:v.target.value}),placeholder:"Asl so'z",autoFocus:!0}),e.jsx(te,{value:d.translated,onChange:v=>h({...d,translated:v.target.value}),placeholder:"Tarjima"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsxs(O,{variant:"ghost",size:"sm",onClick:N,children:[e.jsx(Me,{className:"w-4 h-4 mr-1"}),"Bekor"]}),e.jsxs(O,{size:"sm",onClick:()=>y(p.id),children:[e.jsx(Ne,{className:"w-4 h-4 mr-1"}),"Saqlash"]})]})]}):e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium truncate",children:p.original_word}),e.jsx(O,{variant:"ghost",size:"icon",className:"h-6 w-6 shrink-0",onClick:()=>s(p.original_word,{lang:p.source_language}),disabled:l,children:e.jsx(Sa,{className:"w-3 h-3"})})]}),e.jsx("p",{className:"text-sm text-muted-foreground truncate",children:p.translated_word})]}),e.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[e.jsxs("span",{className:`
                        text-xs px-2 py-0.5 rounded-full shrink-0
                        ${p.box_number>=4?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":p.box_number>=2?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400":"bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-400"}
                      `,children:["#",p.box_number]}),e.jsx(O,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>g(p),children:e.jsx(Ta,{className:"w-4 h-4"})}),e.jsxs(hr,{children:[e.jsx(pr,{asChild:!0,children:e.jsx(O,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive hover:text-destructive",children:e.jsx(Ca,{className:"w-4 h-4"})})}),e.jsxs(Lt,{children:[e.jsxs(It,{children:[e.jsx(Mt,{children:"So'zni o'chirish"}),e.jsxs(qt,{children:['"',p.original_word,`" so'zini o'chirishni xohlaysizmi? Bu amalni qaytarib bo'lmaydi.`]})]}),e.jsxs(Wt,{children:[e.jsx(Bt,{children:"Bekor"}),e.jsx(Ot,{onClick:()=>w(p.id),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"O'chirish"})]})]})]})]})]})})},p.id))})})]})},Wr=()=>{const{t}=Se(),{activeLanguage:a}=Zt(),{addWord:r,addWordsBulk:n,words:s,stats:l}=Oe(),{addXp:c,checkAndUnlockAchievements:i,XP_PER_NEW_WORD:d,level:h}=ta(),[u,f]=o.useState("manual"),[x,g]=o.useState(!1),[y,N]=o.useState(0),w=async v=>{const S=await r({original_word:v.originalWord,translated_word:v.translatedWord,source_language:v.sourceLanguage,target_language:v.targetLanguage,example_sentences:v.exampleSentences,category_id:v.categoryId});if(S&&"error"in S&&S.error==="duplicate")throw new Error(`"${S.existingWord}" so'zi allaqachon mavjud!`);if(!S)throw new Error("Xatolik yuz berdi");N(d),g(!0),await c(d,"new_word"),setTimeout(()=>g(!1),1500),await i({totalWords:s.length+1,streak:l.streak,level:h})},p=async v=>{if(!a)return;const S=await n(v.map(_=>({original_word:_.originalWord,translated_word:_.translatedWord,source_language:a.source_language,target_language:a.target_language,example_sentences:_.exampleSentences}))),A=S.added.length,E=S.duplicates.length;if(E>0&&P.warning(`${A} ta so'z qo'shildi, ${E} ta takroriy so'z o'tkazib yuborildi`),A>0){const _=A*d;N(_),g(!0),await c(_,"bulk_import"),setTimeout(()=>g(!1),2e3),await i({totalWords:s.length+A,streak:l.streak,level:h})}};return a?e.jsxs("div",{className:"min-h-screen pb-24 md:pt-24 md:pb-8",children:[e.jsx(Na,{amount:y,show:x}),e.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-lg",children:[e.jsxs(L.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-8 text-center",children:[e.jsxs("h1",{className:"font-display font-bold text-3xl text-foreground mb-2",children:[t("addWord")," ‚ú®"]}),e.jsx("p",{className:"text-muted-foreground",children:"Yangi so'z qo'shing va o'rganishni boshlang"}),e.jsxs("p",{className:"text-sm text-primary mt-2",children:["+",d," XP har bir yangi so'z uchun"]})]}),e.jsx(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:e.jsxs(ma,{value:u,onValueChange:f,className:"w-full",children:[e.jsxs(ha,{className:"grid w-full grid-cols-4 mb-6 h-12",children:[e.jsxs(ce,{value:"manual",className:"gap-1 h-10 text-xs px-2",children:[e.jsx(Ra,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Qo'lda"})]}),e.jsxs(ce,{value:"dictionary",className:"gap-1 h-10 text-xs px-2",children:[e.jsx(je,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Lug'at"})]}),e.jsxs(ce,{value:"import",className:"gap-1 h-10 text-xs px-2",children:[e.jsx(Xe,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Excel"})]}),e.jsxs(ce,{value:"list",className:"gap-1 h-10 text-xs px-2",children:[e.jsx(Ea,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Ro'yxat"})]})]}),e.jsx(de,{value:"manual",children:e.jsx("div",{className:"bg-card rounded-3xl shadow-card p-6",children:e.jsx(La,{sourceLanguage:a.source_language,targetLanguage:a.target_language,onAddWord:w})})}),e.jsx(de,{value:"dictionary",children:e.jsx("div",{className:"bg-card rounded-3xl shadow-card p-6",children:e.jsx(er,{onImport:p,targetLanguage:a.target_language})})}),e.jsx(de,{value:"import",children:e.jsx("div",{className:"bg-card rounded-3xl shadow-card p-6",children:e.jsx(Ia,{sourceLanguage:a.source_language,targetLanguage:a.target_language,onImport:p})})}),e.jsx(de,{value:"list",children:e.jsx("div",{className:"bg-card rounded-3xl shadow-card p-6",children:e.jsx(fr,{})})})]})}),e.jsxs(L.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"mt-6 p-4 rounded-xl bg-primary/5 border border-primary/10",children:[e.jsx("h4",{className:"font-medium text-sm text-primary mb-2",children:u==="manual"?"üí° Maslahat":u==="dictionary"?"üìö Lug'at haqida":"üìã Excel format"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:u==="manual"?"So'zlar bilan birga misol gaplar qo'shing - bu yodda saqlashni osonlashtiradi!":u==="dictionary"?"Cambridge EnglishProfile - rasmiy CEFR darajalariga mos ingliz tili so'zlari. A1 dan C2 gacha.":"Ustun A - asl so'z, Ustun B - tarjima, Ustun C - misollar (nuqtali vergul bilan ajrating)"})]})]})]}):e.jsx("div",{className:"min-h-screen pb-24 md:pt-24 md:pb-8",children:e.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-md",children:[e.jsxs(L.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-8 text-center",children:[e.jsxs("h1",{className:"font-display font-bold text-3xl text-foreground mb-2",children:[t("addWord")," ‚ú®"]}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Avval o'rganish tilini tanlang"})]}),e.jsx(ka,{}),e.jsx(ea,{to:"/",className:"block mt-4",children:e.jsx(O,{variant:"outline",className:"w-full",children:"Bosh sahifaga"})})]})})};export{Wr as default};
